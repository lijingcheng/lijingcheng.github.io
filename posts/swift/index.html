<!doctype html><html lang=zh-cn><head><title>从 Objective-C 过渡到 Swift // 风行's Blog</title><meta charset=utf-8><meta name=generator content="Hugo 0.61.0"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=author content="风行"><meta name=description content><link rel=stylesheet href=https://lijingcheng.github.io/css/main.min.61bb32028587f24ca28522d8d197970c7ef33284e5fffb45a75fcbbb2dbc4dcb.css><meta name=twitter:card content="summary"><meta name=twitter:title content="从 Objective-C 过渡到 Swift"><meta name=twitter:description content="Swift 不仅支持面向对象和面向协议开发，同时还支持函数式开发，在使用封装继承多态的同时，也可以用协议去组合代码，还可以利用高阶函数去简化代码、组织程序。面向协议开发不仅可以间接实现多继承，还可以使代码编写过程更加灵活，也能够解决面向对象开发带来的冗杂父类问题，在 Swift 中只有引用类型可以使用面向对象开发的继承功能，而引用类型的实例变量会在程序执行过程中因无意修改导致数据异常，此时可用协议替代继承，并且将引用类型改为值类型，便可以大大提高数据的安全性。
Swift 还是一个强类型语言，类型在运行时和编译期间是一致的，这样编译器可以得到足够的信息在生成中间码和机器码时进行优化，并在编译期间完成方法的绑定，可以直接获取方法地址并进行调用。
Hello World print(&#34;Hello world!&#34;) //打印并换行 数据类型 整数 通常使用 Int 来声明整数就可以了，当为了优化内存占用或要处理接口返回的长度明确的数据等情况时可使用显式指定长度的类型，这样可以及时发现值溢出并增强代码可读性。
let age: Int = 4 //常量age在32-bit平台下为Int32,在64-bit下为Int64 var twoThousand = 2_000 //变量twoThousand会被编译器自动推断为Int类型，并且用_增强可读性 浮点数 32/64 位浮点数分别用 Float 和 Double 表示，精度分别为 6/15+ 位数字。
let pi = 3.14159 //浮点数值总是会被推断为Double let a = Int(pi) //自动截断，值为3 let b = Int(exactly: pi) //要求更为精确的转换，当精度有损失，认为转换失败，值为nil 布尔值 let isChild: Bool = true //orfalse 字符 Character 类型通常由编码无关的 Unicode 字符组成
var c: Character = &#34;e&#34; //如果不指定类型，双引号会被推断为字符串类型 Character 可以由一个或多个 Unicode 标量（Scalar）组成"><meta property="og:title" content="从 Objective-C 过渡到 Swift"><meta property="og:description" content="Swift 不仅支持面向对象和面向协议开发，同时还支持函数式开发，在使用封装继承多态的同时，也可以用协议去组合代码，还可以利用高阶函数去简化代码、组织程序。面向协议开发不仅可以间接实现多继承，还可以使代码编写过程更加灵活，也能够解决面向对象开发带来的冗杂父类问题，在 Swift 中只有引用类型可以使用面向对象开发的继承功能，而引用类型的实例变量会在程序执行过程中因无意修改导致数据异常，此时可用协议替代继承，并且将引用类型改为值类型，便可以大大提高数据的安全性。
Swift 还是一个强类型语言，类型在运行时和编译期间是一致的，这样编译器可以得到足够的信息在生成中间码和机器码时进行优化，并在编译期间完成方法的绑定，可以直接获取方法地址并进行调用。
Hello World print(&#34;Hello world!&#34;) //打印并换行 数据类型 整数 通常使用 Int 来声明整数就可以了，当为了优化内存占用或要处理接口返回的长度明确的数据等情况时可使用显式指定长度的类型，这样可以及时发现值溢出并增强代码可读性。
let age: Int = 4 //常量age在32-bit平台下为Int32,在64-bit下为Int64 var twoThousand = 2_000 //变量twoThousand会被编译器自动推断为Int类型，并且用_增强可读性 浮点数 32/64 位浮点数分别用 Float 和 Double 表示，精度分别为 6/15+ 位数字。
let pi = 3.14159 //浮点数值总是会被推断为Double let a = Int(pi) //自动截断，值为3 let b = Int(exactly: pi) //要求更为精确的转换，当精度有损失，认为转换失败，值为nil 布尔值 let isChild: Bool = true //orfalse 字符 Character 类型通常由编码无关的 Unicode 字符组成
var c: Character = &#34;e&#34; //如果不指定类型，双引号会被推断为字符串类型 Character 可以由一个或多个 Unicode 标量（Scalar）组成"><meta property="og:type" content="article"><meta property="og:url" content="https://lijingcheng.github.io/posts/swift/"><meta property="article:published_time" content="2017-03-17T19:10:37+08:00"><meta property="article:modified_time" content="2017-03-17T19:10:37+08:00"></head><body><header class=app-header><a href=https://lijingcheng.github.io><img class=app-header-avatar src=/images/avatar.png alt=风行></a><h1>风行's Blog</h1><p>一直在学习的大龄程序员</p><div class=app-header-social><a target=_blank href=https://github.com/lijingcheng rel="noreferrer noopener"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-github"><title>github</title><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77a5.44 5.44.0 00-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg></a><a target=_blank href=https://www.instagram.com/bj_lijingcheng/ rel="noreferrer noopener"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-instagram"><title>instagram</title><rect x="2" y="2" width="20" height="20" rx="5" ry="5"/><path d="M16 11.37A4 4 0 1112.63 8 4 4 0 0116 11.37z"/><line x1="17.5" y1="6.5" x2="17.5" y2="6.5"/></svg></a></div></header><main class=app-container><article class=post><header class=post-header><h1 class=post-title>从 Objective-C 过渡到 Swift</h1><div class=post-meta><div><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-calendar"><title>calendar</title><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>Mar 17, 2017</div></div></header><div class=post-content><p><a href>Swift</a> 不仅支持面向对象和面向协议开发，同时还支持函数式开发，在使用封装继承多态的同时，也可以用协议去组合代码，还可以利用高阶函数去简化代码、组织程序。面向协议开发不仅可以间接实现多继承，还可以使代码编写过程更加灵活，也能够解决面向对象开发带来的冗杂父类问题，在 Swift 中只有引用类型可以使用面向对象开发的继承功能，而引用类型的实例变量会在程序执行过程中因无意修改导致数据异常，此时可用协议替代继承，并且将引用类型改为值类型，便可以大大提高数据的安全性。</p><p>Swift 还是一个强类型语言，类型在运行时和编译期间是一致的，这样编译器可以得到足够的信息在生成中间码和机器码时进行优化，并在编译期间完成方法的绑定，可以直接获取方法地址并进行调用。</p><h2 id=hello-world>Hello World</h2><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift>print(<span style=color:#e6db74>&#34;</span><span style=color:#e6db74>Hello world!</span><span style=color:#e6db74>&#34;</span>) <span style=color:#75715e>//</span><span style=color:#75715e> </span><span style=color:#75715e>打</span><span style=color:#75715e>印</span><span style=color:#75715e>并</span><span style=color:#75715e>换</span><span style=color:#75715e>行</span>
</code></pre></div><h2 id=heading>数据类型</h2><h3 id=heading-1>整数</h3><p>通常使用 Int 来声明整数就可以了，当为了优化内存占用或要处理接口返回的长度明确的数据等情况时可使用显式指定长度的类型，这样可以及时发现值溢出并增强代码可读性。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=color:#66d9ef>let</span> age: Int = <span style=color:#ae81ff>4</span> <span style=color:#75715e>//</span><span style=color:#75715e> </span><span style=color:#75715e>常</span><span style=color:#75715e>量</span><span style=color:#75715e> </span><span style=color:#75715e>a</span><span style=color:#75715e>g</span><span style=color:#75715e>e</span><span style=color:#75715e> </span><span style=color:#75715e>在</span><span style=color:#75715e> </span><span style=color:#75715e>3</span><span style=color:#75715e>2</span><span style=color:#75715e>-</span><span style=color:#75715e>b</span><span style=color:#75715e>i</span><span style=color:#75715e>t</span><span style=color:#75715e> </span><span style=color:#75715e>平</span><span style=color:#75715e>台</span><span style=color:#75715e>下</span><span style=color:#75715e>为</span><span style=color:#75715e> </span><span style=color:#75715e>I</span><span style=color:#75715e>n</span><span style=color:#75715e>t</span><span style=color:#75715e>3</span><span style=color:#75715e>2</span><span style=color:#75715e>,</span><span style=color:#75715e>在</span><span style=color:#75715e> </span><span style=color:#75715e>6</span><span style=color:#75715e>4</span><span style=color:#75715e>-</span><span style=color:#75715e>b</span><span style=color:#75715e>i</span><span style=color:#75715e>t</span><span style=color:#75715e> </span><span style=color:#75715e>下</span><span style=color:#75715e>为</span><span style=color:#75715e> </span><span style=color:#75715e>I</span><span style=color:#75715e>n</span><span style=color:#75715e>t</span><span style=color:#75715e>6</span><span style=color:#75715e>4</span>

<span style=color:#66d9ef>var</span> twoThousand = <span style=color:#ae81ff>2_000</span> <span style=color:#75715e>//</span><span style=color:#75715e> </span><span style=color:#75715e>变</span><span style=color:#75715e>量</span><span style=color:#75715e> </span><span style=color:#75715e>t</span><span style=color:#75715e>w</span><span style=color:#75715e>o</span><span style=color:#75715e>T</span><span style=color:#75715e>h</span><span style=color:#75715e>o</span><span style=color:#75715e>u</span><span style=color:#75715e>s</span><span style=color:#75715e>a</span><span style=color:#75715e>n</span><span style=color:#75715e>d</span><span style=color:#75715e> </span><span style=color:#75715e>会</span><span style=color:#75715e>被</span><span style=color:#75715e>编</span><span style=color:#75715e>译</span><span style=color:#75715e>器</span><span style=color:#75715e>自</span><span style=color:#75715e>动</span><span style=color:#75715e>推</span><span style=color:#75715e>断</span><span style=color:#75715e>为</span><span style=color:#75715e> </span><span style=color:#75715e>I</span><span style=color:#75715e>n</span><span style=color:#75715e>t</span><span style=color:#75715e> </span><span style=color:#75715e>类</span><span style=color:#75715e>型</span><span style=color:#75715e>，</span><span style=color:#75715e>并</span><span style=color:#75715e>且</span><span style=color:#75715e>用</span><span style=color:#75715e> </span><span style=color:#75715e>_</span><span style=color:#75715e> </span><span style=color:#75715e>增</span><span style=color:#75715e>强</span><span style=color:#75715e>可</span><span style=color:#75715e>读</span><span style=color:#75715e>性</span>
</code></pre></div><h3 id=heading-2>浮点数</h3><p>32/64 位浮点数分别用 Float 和 Double 表示，精度分别为 6/15+ 位数字。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=color:#66d9ef>let</span> pi = <span style=color:#ae81ff>3.14159</span> <span style=color:#75715e>//</span><span style=color:#75715e> </span><span style=color:#75715e>浮</span><span style=color:#75715e>点</span><span style=color:#75715e>数</span><span style=color:#75715e>值</span><span style=color:#75715e>总</span><span style=color:#75715e>是</span><span style=color:#75715e>会</span><span style=color:#75715e>被</span><span style=color:#75715e>推</span><span style=color:#75715e>断</span><span style=color:#75715e>为</span><span style=color:#75715e> </span><span style=color:#75715e>D</span><span style=color:#75715e>o</span><span style=color:#75715e>u</span><span style=color:#75715e>b</span><span style=color:#75715e>l</span><span style=color:#75715e>e</span>

<span style=color:#66d9ef>let</span> a = Int(pi) <span style=color:#75715e>//</span><span style=color:#75715e> </span><span style=color:#75715e>自</span><span style=color:#75715e>动</span><span style=color:#75715e>截</span><span style=color:#75715e>断</span><span style=color:#75715e>，</span><span style=color:#75715e>值</span><span style=color:#75715e>为</span><span style=color:#75715e> </span><span style=color:#75715e>3</span>
<span style=color:#66d9ef>let</span> b = Int(exactly: pi) <span style=color:#75715e>//</span><span style=color:#75715e> </span><span style=color:#75715e>要</span><span style=color:#75715e>求</span><span style=color:#75715e>更</span><span style=color:#75715e>为</span><span style=color:#75715e>精</span><span style=color:#75715e>确</span><span style=color:#75715e>的</span><span style=color:#75715e>转</span><span style=color:#75715e>换</span><span style=color:#75715e>，</span><span style=color:#75715e>当</span><span style=color:#75715e>精</span><span style=color:#75715e>度</span><span style=color:#75715e>有</span><span style=color:#75715e>损</span><span style=color:#75715e>失</span><span style=color:#75715e>，</span><span style=color:#75715e>认</span><span style=color:#75715e>为</span><span style=color:#75715e>转</span><span style=color:#75715e>换</span><span style=color:#75715e>失</span><span style=color:#75715e>败</span><span style=color:#75715e>，</span><span style=color:#75715e>值</span><span style=color:#75715e>为</span><span style=color:#75715e> </span><span style=color:#75715e>n</span><span style=color:#75715e>i</span><span style=color:#75715e>l</span>
</code></pre></div><h3 id=heading-3>布尔值</h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=color:#66d9ef>let</span> isChild: Bool = <span style=color:#66d9ef>true</span> <span style=color:#75715e>//</span><span style=color:#75715e> </span><span style=color:#75715e>o</span><span style=color:#75715e>r</span><span style=color:#75715e> </span><span style=color:#75715e>f</span><span style=color:#75715e>a</span><span style=color:#75715e>l</span><span style=color:#75715e>s</span><span style=color:#75715e>e</span>
</code></pre></div><h3 id=heading-4>字符</h3><p>Character 类型通常由编码无关的 Unicode 字符组成</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=color:#66d9ef>var</span> c: Character = <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>e</span><span style=color:#e6db74>&#34;</span> <span style=color:#75715e>//</span><span style=color:#75715e> </span><span style=color:#75715e>如</span><span style=color:#75715e>果</span><span style=color:#75715e>不</span><span style=color:#75715e>指</span><span style=color:#75715e>定</span><span style=color:#75715e>类</span><span style=color:#75715e>型</span><span style=color:#75715e>，</span><span style=color:#75715e>双</span><span style=color:#75715e>引</span><span style=color:#75715e>号</span><span style=color:#75715e>会</span><span style=color:#75715e>被</span><span style=color:#75715e>推</span><span style=color:#75715e>断</span><span style=color:#75715e>为</span><span style=color:#75715e>字</span><span style=color:#75715e>符</span><span style=color:#75715e>串</span><span style=color:#75715e>类</span><span style=color:#75715e>型</span>
</code></pre></div><p>Character 可以由一个或多个 Unicode 标量（Scalar）组成</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=color:#66d9ef>var</span> c1: Character = <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>\</span><span style=color:#e6db74>u{00E9}</span><span style=color:#e6db74>&#34;</span> <span style=color:#75715e>//</span><span style=color:#75715e> </span><span style=color:#75715e>é</span>

<span style=color:#66d9ef>var</span> c2: Character = <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>\</span><span style=color:#e6db74>u{0065}</span><span style=color:#e6db74>\</span><span style=color:#e6db74>u{0301}</span><span style=color:#e6db74>&#34;</span> <span style=color:#75715e>//</span><span style=color:#75715e> </span><span style=color:#75715e>e</span><span style=color:#75715e> </span><span style=color:#75715e>+</span><span style=color:#75715e> </span><span style=color:#75715e> </span><span style=color:#75715e>́</span><span style=color:#75715e> </span><span style=color:#75715e>=</span><span style=color:#75715e> </span><span style=color:#75715e>é</span>
</code></pre></div><h3 id=heading-5>字符串</h3><p>Swift 中的 String 是值类型，所以在进行传递时都会进行值拷贝，不用担心会被意外修改。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=color:#66d9ef>let</span> str: String = <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>Hello</span><span style=color:#e6db74>&#34;</span>

print(<span style=color:#e6db74>&#34;</span><span style=color:#e6db74>str: </span><span style=color:#e6db74>\(</span>str<span style=color:#e6db74>)</span><span style=color:#e6db74>&#34;</span>) <span style=color:#75715e>//</span><span style=color:#75715e> </span><span style=color:#75715e>S</span><span style=color:#75715e>w</span><span style=color:#75715e>i</span><span style=color:#75715e>f</span><span style=color:#75715e>t</span><span style=color:#75715e> </span><span style=color:#75715e>会</span><span style=color:#75715e>用</span><span style=color:#75715e> </span><span style=color:#75715e>s</span><span style=color:#75715e>t</span><span style=color:#75715e>r</span><span style=color:#75715e> </span><span style=color:#75715e>的</span><span style=color:#75715e>值</span><span style=color:#75715e>替</span><span style=color:#75715e>换</span><span style=color:#75715e>占</span><span style=color:#75715e>位</span><span style=color:#75715e>符</span><span style=color:#75715e> </span><span style=color:#75715e>\</span><span style=color:#75715e>(</span><span style=color:#75715e>s</span><span style=color:#75715e>t</span><span style=color:#75715e>r</span><span style=color:#75715e>)</span>
</code></pre></div><p>给字符串追加字符不一定会更改字符串的字符数量</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=color:#66d9ef>var</span> word = <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>cafe</span><span style=color:#e6db74>&#34;</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>\</span><span style=color:#e6db74>u{301}</span><span style=color:#e6db74>&#34;</span> <span style=color:#75715e>//</span><span style=color:#75715e> </span><span style=color:#75715e>c</span><span style=color:#75715e>a</span><span style=color:#75715e>f</span><span style=color:#75715e>e</span><span style=color:#75715e>́</span>

print(word.characters.count) <span style=color:#75715e>//</span><span style=color:#75715e> </span><span style=color:#75715e>有</span><span style=color:#75715e> </span><span style=color:#75715e>4</span><span style=color:#75715e> </span><span style=color:#75715e>个</span><span style=color:#75715e> </span><span style=color:#75715e>c</span><span style=color:#75715e>h</span><span style=color:#75715e>a</span><span style=color:#75715e>r</span>
print(word.unicodeScalars.count) <span style=color:#75715e>//</span><span style=color:#75715e> </span><span style=color:#75715e>有</span><span style=color:#75715e> </span><span style=color:#75715e>5</span><span style=color:#75715e> </span><span style=color:#75715e>个</span><span style=color:#75715e> </span><span style=color:#75715e>U</span><span style=color:#75715e>n</span><span style=color:#75715e>i</span><span style=color:#75715e>c</span><span style=color:#75715e>o</span><span style=color:#75715e>d</span><span style=color:#75715e>e</span><span style=color:#75715e> </span><span style=color:#75715e>S</span><span style=color:#75715e>c</span><span style=color:#75715e>a</span><span style=color:#75715e>l</span><span style=color:#75715e>a</span><span style=color:#75715e>r</span>
</code></pre></div><p>在 Swift 中不同的字符以及相同字符的不同表示方式可能需要不同数量的内存空间来存储，所以要知道字符的确定位置就必须从 String 开头遍历每一个 Unicode 标量直到结尾。因此 Swift 的字符串不能用整数做索引，而是使用一个关联的索引类型 String.Index，它对应着字符串中每一个字符的位置。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=color:#66d9ef>let</span> greeting = <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>Guten Tag!</span><span style=color:#e6db74>&#34;</span>

print(greeting[greeting.startIndex])<span style=color:#75715e>//</span><span style=color:#75715e> </span><span style=color:#75715e>值</span><span style=color:#75715e>为</span><span style=color:#75715e> </span><span style=color:#75715e>G</span><span style=color:#75715e>，</span><span style=color:#75715e>如</span><span style=color:#75715e>果</span><span style=color:#75715e>用</span><span style=color:#75715e> </span><span style=color:#75715e>g</span><span style=color:#75715e>r</span><span style=color:#75715e>e</span><span style=color:#75715e>e</span><span style=color:#75715e>t</span><span style=color:#75715e>i</span><span style=color:#75715e>n</span><span style=color:#75715e>g</span><span style=color:#75715e>[</span><span style=color:#75715e>0</span><span style=color:#75715e>]</span><span style=color:#75715e> </span><span style=color:#75715e>会</span><span style=color:#75715e>报</span><span style=color:#75715e>错</span>
print(greeting[greeting.index(greeting.startIndex, offsetBy: <span style=color:#ae81ff>7</span>)]) <span style=color:#75715e>//</span><span style=color:#75715e> </span><span style=color:#75715e>a</span>
</code></pre></div><h3 id=heading-6>数组</h3><p>Array 使用有序列表存储同一类型的多个值，可以存储重复值。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=color:#66d9ef>var</span> array1 = Array&lt;String&gt;() <span style=color:#75715e>//</span><span style=color:#75715e> </span><span style=color:#75715e>字</span><span style=color:#75715e>符</span><span style=color:#75715e>串</span><span style=color:#75715e>数</span><span style=color:#75715e>组</span>

<span style=color:#66d9ef>var</span> array2 = [String]() <span style=color:#75715e>//</span><span style=color:#75715e> </span><span style=color:#75715e>字</span><span style=color:#75715e>符</span><span style=color:#75715e>串</span><span style=color:#75715e>数</span><span style=color:#75715e>组</span><span style=color:#75715e>（</span><span style=color:#75715e>推</span><span style=color:#75715e>荐</span><span style=color:#75715e>写</span><span style=color:#75715e>法</span><span style=color:#75715e>）</span>

<span style=color:#66d9ef>var</span> array3 = Array(repeating: <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>_</span><span style=color:#e6db74>&#34;</span>, count: <span style=color:#ae81ff>3</span>) <span style=color:#75715e>//</span><span style=color:#75715e> </span><span style=color:#75715e>字</span><span style=color:#75715e>符</span><span style=color:#75715e>串</span><span style=color:#75715e>数</span><span style=color:#75715e>组</span><span style=color:#75715e>，</span><span style=color:#75715e>包</span><span style=color:#75715e>含</span><span style=color:#75715e>3</span><span style=color:#75715e>个</span><span style=color:#75715e>元</span><span style=color:#75715e>素</span><span style=color:#75715e>，</span><span style=color:#75715e>默</span><span style=color:#75715e>认</span><span style=color:#75715e>值</span><span style=color:#75715e>为</span><span style=color:#75715e> </span><span style=color:#75715e>_</span>

<span style=color:#66d9ef>var</span> array4 = [<span style=color:#e6db74>&#34;</span><span style=color:#e6db74>apple</span><span style=color:#e6db74>&#34;</span>, <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>pen</span><span style=color:#e6db74>&#34;</span>, <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>apple-pen</span><span style=color:#e6db74>&#34;</span>] <span style=color:#75715e>//</span><span style=color:#75715e> </span><span style=color:#75715e>自</span><span style=color:#75715e>动</span><span style=color:#75715e>推</span><span style=color:#75715e>断</span><span style=color:#75715e>出</span><span style=color:#75715e>数</span><span style=color:#75715e>组</span><span style=color:#75715e>类</span><span style=color:#75715e>型</span><span style=color:#75715e>为</span><span style=color:#75715e> </span><span style=color:#75715e>S</span><span style=color:#75715e>t</span><span style=color:#75715e>r</span><span style=color:#75715e>i</span><span style=color:#75715e>n</span><span style=color:#75715e>g</span>
array4 <span style=color:#f92672>+=</span> [<span style=color:#e6db74>&#34;</span><span style=color:#e6db74>Pineapple</span><span style=color:#e6db74>&#34;</span>] <span style=color:#75715e>//</span><span style=color:#75715e> </span><span style=color:#75715e>相</span><span style=color:#75715e>同</span><span style=color:#75715e>类</span><span style=color:#75715e>型</span><span style=color:#75715e>数</span><span style=color:#75715e>组</span><span style=color:#75715e>可</span><span style=color:#75715e>以</span><span style=color:#75715e>用</span><span style=color:#75715e> </span><span style=color:#75715e>+</span><span style=color:#75715e> </span><span style=color:#75715e>进</span><span style=color:#75715e>行</span><span style=color:#75715e>组</span><span style=color:#75715e>合</span>
array4.append(<span style=color:#e6db74>&#34;</span><span style=color:#e6db74>Pen</span><span style=color:#e6db74>&#34;</span>) <span style=color:#75715e>//</span><span style=color:#75715e> </span><span style=color:#75715e>添</span><span style=color:#75715e>加</span><span style=color:#75715e>元</span><span style=color:#75715e>素</span>
array4[<span style=color:#ae81ff>0</span>] = <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>Apple</span><span style=color:#e6db74>&#34;</span> <span style=color:#75715e>//</span><span style=color:#75715e> </span><span style=color:#75715e>可</span><span style=color:#75715e>以</span><span style=color:#75715e>用</span><span style=color:#75715e>下</span><span style=color:#75715e>标</span><span style=color:#75715e>访</span><span style=color:#75715e>问</span><span style=color:#75715e>和</span><span style=color:#75715e>修</span><span style=color:#75715e>改</span><span style=color:#75715e>数</span><span style=color:#75715e>组</span><span style=color:#75715e>元</span><span style=color:#75715e>素</span>
array4[<span style=color:#ae81ff>1.</span>..<span style=color:#ae81ff>2</span>] = [<span style=color:#e6db74>&#34;</span><span style=color:#e6db74>Pen</span><span style=color:#e6db74>&#34;</span>, <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>Apple-Pen</span><span style=color:#e6db74>&#34;</span>] <span style=color:#75715e>//</span><span style=color:#75715e> </span><span style=color:#75715e>还</span><span style=color:#75715e>可</span><span style=color:#75715e>以</span><span style=color:#75715e>利</span><span style=color:#75715e>用</span><span style=color:#75715e>下</span><span style=color:#75715e>标</span><span style=color:#75715e>来</span><span style=color:#75715e>一</span><span style=color:#75715e>次</span><span style=color:#75715e>改</span><span style=color:#75715e>变</span><span style=color:#75715e>一</span><span style=color:#75715e>系</span><span style=color:#75715e>列</span><span style=color:#75715e>数</span><span style=color:#75715e>据</span><span style=color:#75715e>值</span><span style=color:#75715e>，</span><span style=color:#75715e>尽</span><span style=color:#75715e>量</span><span style=color:#75715e>保</span><span style=color:#75715e>证</span><span style=color:#75715e>下</span><span style=color:#75715e>标</span><span style=color:#75715e>区</span><span style=color:#75715e>间</span><span style=color:#75715e>与</span><span style=color:#75715e>值</span><span style=color:#75715e>的</span><span style=color:#75715e>个</span><span style=color:#75715e>数</span><span style=color:#75715e>相</span><span style=color:#75715e>匹</span><span style=color:#75715e>配</span>
</code></pre></div><p>使用 for-in 循环来遍历数组中的数据项</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=color:#66d9ef>for</span> item <span style=color:#66d9ef>in</span> array4 {}
</code></pre></div><p>如果我们同时需要每个数据项的值和索引值，可以使用 enumerated() 来进行数组遍历。enumerated() 返回一个由每一个数据项索引值和数据值组成的元组。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=color:#66d9ef>for</span> (index, value) <span style=color:#66d9ef>in</span> array4.enumerated() {}
</code></pre></div><p>可以嵌套多对方括号来创建多维数组</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=color:#66d9ef>var</span> array3D: [[[Int]]] = [[[<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>2</span>], [<span style=color:#ae81ff>3</span>, <span style=color:#ae81ff>4</span>]], [[<span style=color:#ae81ff>5</span>, <span style=color:#ae81ff>6</span>], [<span style=color:#ae81ff>7</span>, <span style=color:#ae81ff>8</span>]]]

print(array3D[<span style=color:#ae81ff>0</span>])
print(array3D[<span style=color:#ae81ff>0</span>][<span style=color:#ae81ff>1</span>])
print(array3D[<span style=color:#ae81ff>0</span>][<span style=color:#ae81ff>1</span>][<span style=color:#ae81ff>1</span>])
</code></pre></div><h3 id=heading-7>集合</h3><p>Set 用来存储相同类型并且没有确定顺序的值，不可以存储重复值。一个类型为了存储在集合中必须是可哈希化的，需要确认 Hashable 协议并提供方法来计算它的哈希值，因为 Hashable 符合 Equatable 协议，所以还需要提供 <code>==</code> 的实现。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=color:#66d9ef>var</span> set1 = Set&lt;String&gt;() <span style=color:#75715e>//</span><span style=color:#75715e> </span><span style=color:#75715e>与</span><span style=color:#75715e>数</span><span style=color:#75715e>组</span><span style=color:#75715e>不</span><span style=color:#75715e>同</span><span style=color:#75715e>的</span><span style=color:#75715e>是</span><span style=color:#75715e>集</span><span style=color:#75715e>合</span><span style=color:#75715e>的</span><span style=color:#75715e>声</span><span style=color:#75715e>明</span><span style=color:#75715e>没</span><span style=color:#75715e>有</span><span style=color:#75715e>简</span><span style=color:#75715e>化</span><span style=color:#75715e>形</span><span style=color:#75715e>式</span>

<span style=color:#66d9ef>var</span> set2: Set = [<span style=color:#e6db74>&#34;</span><span style=color:#e6db74>apple</span><span style=color:#e6db74>&#34;</span>, <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>pen</span><span style=color:#e6db74>&#34;</span>, <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>apple-pen</span><span style=color:#e6db74>&#34;</span>] <span style=color:#75715e>//</span><span style=color:#75715e> </span><span style=color:#75715e>如</span><span style=color:#75715e>果</span><span style=color:#75715e>不</span><span style=color:#75715e>指</span><span style=color:#75715e>定</span><span style=color:#75715e>类</span><span style=color:#75715e>型</span><span style=color:#75715e>就</span><span style=color:#75715e>会</span><span style=color:#75715e>被</span><span style=color:#75715e>认</span><span style=color:#75715e>为</span><span style=color:#75715e>是</span><span style=color:#75715e>数</span><span style=color:#75715e>组</span>
set2.insert(<span style=color:#e6db74>&#34;</span><span style=color:#e6db74>pineapple</span><span style=color:#e6db74>&#34;</span>)
</code></pre></div><p>按照特定顺序来遍历一个 Set 中的值可以使用 sorted() 方法，它将返回一个有序数组。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=color:#66d9ef>for</span> item <span style=color:#66d9ef>in</span> set2.sorted() {}
</code></pre></div><h3 id=heading-8>字典</h3><p>Dictionary 用来存储多个相同类型的值，每个值都关联唯一的 key，key 的类型必须遵循 Hashable 协议，字典中的数据项没有具体顺序。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=color:#66d9ef>var</span> dict1 = Dictionary&lt;Int, String&gt;() <span style=color:#75715e>//</span><span style=color:#75715e> </span><span style=color:#75715e>键</span><span style=color:#75715e>是</span><span style=color:#75715e>I</span><span style=color:#75715e>n</span><span style=color:#75715e>t</span><span style=color:#75715e>型</span><span style=color:#75715e>，</span><span style=color:#75715e>值</span><span style=color:#75715e>是</span><span style=color:#75715e>S</span><span style=color:#75715e>t</span><span style=color:#75715e>r</span><span style=color:#75715e>i</span><span style=color:#75715e>n</span><span style=color:#75715e>g</span><span style=color:#75715e>型</span>

<span style=color:#66d9ef>var</span> dict2 = [Int: String]() <span style=color:#75715e>//</span><span style=color:#75715e>推</span><span style=color:#75715e>荐</span><span style=color:#75715e>写</span><span style=color:#75715e>法</span>
dict2[<span style=color:#ae81ff>3</span>] = <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>lijingcheng</span><span style=color:#e6db74>&#34;</span> <span style=color:#75715e>//</span><span style=color:#75715e> </span><span style=color:#75715e>k</span><span style=color:#75715e>e</span><span style=color:#75715e>y</span><span style=color:#75715e>:</span><span style=color:#75715e> </span><span style=color:#75715e>3</span><span style=color:#75715e>,</span><span style=color:#75715e> </span><span style=color:#75715e>v</span><span style=color:#75715e>a</span><span style=color:#75715e>l</span><span style=color:#75715e>u</span><span style=color:#75715e>e</span><span style=color:#75715e>:</span><span style=color:#75715e> </span><span style=color:#75715e>l</span><span style=color:#75715e>i</span><span style=color:#75715e>j</span><span style=color:#75715e>i</span><span style=color:#75715e>n</span><span style=color:#75715e>g</span><span style=color:#75715e>c</span><span style=color:#75715e>h</span><span style=color:#75715e>e</span><span style=color:#75715e>n</span><span style=color:#75715e>g</span><span style=color:#75715e> </span><span style=color:#75715e>字</span><span style=color:#75715e>典</span><span style=color:#75715e>包</span><span style=color:#75715e>含</span><span style=color:#75715e> </span><span style=color:#75715e>k</span><span style=color:#75715e>e</span><span style=color:#75715e>y</span><span style=color:#75715e> </span><span style=color:#75715e>时</span><span style=color:#75715e>此</span><span style=color:#75715e>操</span><span style=color:#75715e>作</span><span style=color:#75715e>为</span><span style=color:#75715e>修</span><span style=color:#75715e>改</span><span style=color:#75715e>，</span><span style=color:#75715e>否</span><span style=color:#75715e>则</span><span style=color:#75715e>为</span><span style=color:#75715e>添</span><span style=color:#75715e>加</span>
dict2 = [:] <span style=color:#75715e>//</span><span style=color:#75715e> </span><span style=color:#75715e>赋</span><span style=color:#75715e>值</span><span style=color:#75715e>为</span><span style=color:#75715e>空</span><span style=color:#75715e>字</span><span style=color:#75715e>典</span>
</code></pre></div><p>遍历字典时每一个数据项都以 (key, value) 元组形式返回</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=color:#66d9ef>for</span> (key, value) <span style=color:#66d9ef>in</span> dict2 {}
</code></pre></div><h3 id=heading-9>元组</h3><p>tuples 可以把多个不同类型的值组合成一个复合值，并且值是有序的，元组不支持 add 和 remove 操作，但是支持修改。元组并不适合创建复杂的数据结构，更适合用于组合少量的多元数据，例如可以在函数中一次返回多个值。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=color:#66d9ef>let</span> http404Error = (<span style=color:#ae81ff>404</span>, <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>Not Found</span><span style=color:#e6db74>&#34;</span>) <span style=color:#75715e>//</span><span style=color:#75715e> </span><span style=color:#75715e>h</span><span style=color:#75715e>t</span><span style=color:#75715e>t</span><span style=color:#75715e>p</span><span style=color:#75715e>4</span><span style=color:#75715e>0</span><span style=color:#75715e>4</span><span style=color:#75715e>E</span><span style=color:#75715e>r</span><span style=color:#75715e>r</span><span style=color:#75715e>o</span><span style=color:#75715e>r</span><span style=color:#75715e> </span><span style=color:#75715e>的</span><span style=color:#75715e>类</span><span style=color:#75715e>型</span><span style=color:#75715e>是</span><span style=color:#75715e> </span><span style=color:#75715e>(</span><span style=color:#75715e>I</span><span style=color:#75715e>n</span><span style=color:#75715e>t</span><span style=color:#75715e>,</span><span style=color:#75715e> </span><span style=color:#75715e>S</span><span style=color:#75715e>t</span><span style=color:#75715e>r</span><span style=color:#75715e>i</span><span style=color:#75715e>n</span><span style=color:#75715e>g</span><span style=color:#75715e>)</span>

print(<span style=color:#e6db74>&#34;</span><span style=color:#e6db74>\(</span>http404Error.<span style=color:#ae81ff>0</span><span style=color:#e6db74>)</span><span style=color:#e6db74>, </span><span style=color:#e6db74>\(</span>http404Error.<span style=color:#ae81ff>1</span><span style=color:#e6db74>)</span><span style=color:#e6db74>.</span><span style=color:#e6db74>&#34;</span>) <span style=color:#75715e>//</span><span style=color:#75715e> </span><span style=color:#75715e>用</span><span style=color:#75715e>下</span><span style=color:#75715e>标</span><span style=color:#75715e>访</span><span style=color:#75715e>问</span><span style=color:#75715e>元</span><span style=color:#75715e>组</span>
</code></pre></div><p>定义元组时给单个元素命名，然后通过名字来获取元素的值</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=color:#66d9ef>let</span> http200Status = (statusCode: <span style=color:#ae81ff>200</span>, description: <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>OK</span><span style=color:#e6db74>&#34;</span>)

print(<span style=color:#e6db74>&#34;</span><span style=color:#e6db74>\(</span>http200Status.statusCode<span style=color:#e6db74>)</span><span style=color:#e6db74>, </span><span style=color:#e6db74>\(</span>http200Status.description<span style=color:#e6db74>)</span><span style=color:#e6db74>.</span><span style=color:#e6db74>&#34;</span>)
</code></pre></div><p>将元组的内容分解为常量</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=color:#66d9ef>let</span> (statusCode, statusMessage) = http404Error

print(<span style=color:#e6db74>&#34;</span><span style=color:#e6db74>\(</span>statusCode<span style=color:#e6db74>)</span><span style=color:#e6db74>, </span><span style=color:#e6db74>\(</span>statusMessage<span style=color:#e6db74>)</span><span style=color:#e6db74>.</span><span style=color:#e6db74>&#34;</span>)
</code></pre></div><p>元组支持嵌套</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=color:#66d9ef>let</span> userInfo = (<span style=color:#e6db74>&#34;</span><span style=color:#e6db74>lijingcheng</span><span style=color:#e6db74>&#34;</span>, (<span style=color:#e6db74>&#34;</span><span style=color:#e6db74>male</span><span style=color:#e6db74>&#34;</span>, <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>Mtime</span><span style=color:#e6db74>&#34;</span>), [<span style=color:#e6db74>&#34;</span><span style=color:#e6db74>obj1</span><span style=color:#e6db74>&#34;</span>, <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>obj2</span><span style=color:#e6db74>&#34;</span>], [<span style=color:#e6db74>&#34;</span><span style=color:#e6db74>key</span><span style=color:#e6db74>&#34;</span>: <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>value</span><span style=color:#e6db74>&#34;</span>])
</code></pre></div><p>不使用额外空间就能交换两个值</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>swap</span>(a: <span style=color:#66d9ef>inout</span> T, b: <span style=color:#66d9ef>inout</span> T) {
    (a, b) = (b, a)
}
</code></pre></div><h3 id=optional>Optional</h3><p>在声明变量时可以用可选类型来处理值可能为 nil 的情况，可选类型也可用于函数参数和函数返回值。（Swift 中 nil 不是指针，它是一个确定的值，可用来表示任何类型变量的值缺失）</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=color:#66d9ef>let</span> possibleNumber: String? = <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>123</span><span style=color:#e6db74>&#34;</span> <span style=color:#75715e>//</span><span style=color:#75715e> </span><span style=color:#75715e>S</span><span style=color:#75715e>t</span><span style=color:#75715e>r</span><span style=color:#75715e>i</span><span style=color:#75715e>n</span><span style=color:#75715e>g</span><span style=color:#75715e>?</span><span style=color:#75715e> </span><span style=color:#75715e>也</span><span style=color:#75715e>可</span><span style=color:#75715e>以</span><span style=color:#75715e>写</span><span style=color:#75715e>成</span><span style=color:#75715e> </span><span style=color:#75715e>O</span><span style=color:#75715e>p</span><span style=color:#75715e>t</span><span style=color:#75715e>i</span><span style=color:#75715e>o</span><span style=color:#75715e>n</span><span style=color:#75715e>a</span><span style=color:#75715e>l</span><span style=color:#75715e>&lt;</span><span style=color:#75715e>S</span><span style=color:#75715e>t</span><span style=color:#75715e>r</span><span style=color:#75715e>i</span><span style=color:#75715e>n</span><span style=color:#75715e>g</span><span style=color:#75715e>&gt;</span>

<span style=color:#75715e>//</span><span style=color:#75715e> </span><span style=color:#75715e>使</span><span style=color:#75715e>用</span><span style=color:#75715e>可</span><span style=color:#75715e>选</span><span style=color:#75715e>绑</span><span style=color:#75715e>定</span><span style=color:#75715e>来</span><span style=color:#75715e>判</span><span style=color:#75715e>断</span><span style=color:#75715e>可</span><span style=color:#75715e>选</span><span style=color:#75715e>类</span><span style=color:#75715e>型</span><span style=color:#75715e>是</span><span style=color:#75715e>否</span><span style=color:#75715e>为</span><span style=color:#75715e>空</span>
<span style=color:#66d9ef>if</span> <span style=color:#66d9ef>let</span> num = possibleNumber {
    print(num)
    print(possibleNumber!) <span style=color:#75715e>//</span><span style=color:#75715e> </span><span style=color:#75715e>强</span><span style=color:#75715e>制</span><span style=color:#75715e>解</span><span style=color:#75715e>析</span><span style=color:#75715e>可</span><span style=color:#75715e>选</span><span style=color:#75715e>类</span><span style=color:#75715e>型</span><span style=color:#75715e> </span><span style=color:#75715e>p</span><span style=color:#75715e>o</span><span style=color:#75715e>s</span><span style=color:#75715e>s</span><span style=color:#75715e>i</span><span style=color:#75715e>b</span><span style=color:#75715e>l</span><span style=color:#75715e>e</span><span style=color:#75715e>N</span><span style=color:#75715e>u</span><span style=color:#75715e>m</span><span style=color:#75715e>b</span><span style=color:#75715e>e</span><span style=color:#75715e>r</span><span style=color:#75715e>，</span><span style=color:#75715e>如</span><span style=color:#75715e>果</span><span style=color:#75715e>值</span><span style=color:#75715e>为</span><span style=color:#75715e> </span><span style=color:#75715e>n</span><span style=color:#75715e>i</span><span style=color:#75715e>l</span><span style=color:#75715e> </span><span style=color:#75715e>则</span><span style=color:#75715e>会</span><span style=color:#75715e>报</span><span style=color:#75715e>错</span>
}
</code></pre></div><p>当确定可选类型变量有值的情况下，可以用隐式解析可选类型来定义这个变量来避免每次使用前的 if 判断，以提高效率。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=color:#66d9ef>let</span> assumedString: String! = <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>An implicitly unwrapped optional string.</span><span style=color:#e6db74>&#34;</span>

print(assumedString) <span style=color:#75715e>//</span><span style=color:#75715e> </span><span style=color:#75715e>不</span><span style=color:#75715e>需</span><span style=color:#75715e>要</span><span style=color:#75715e>强</span><span style=color:#75715e>制</span><span style=color:#75715e>解</span><span style=color:#75715e>析</span>
</code></pre></div><h3 id=any>Any</h3><p>Any 相当于 Objective-C 中的 id，它可以表示任何类型，包括函数类型，AnyObject 可以表示任何类类型的实例。可以用类型检查操作符 is 来检查一个实例是否属于特定类型，就像 Objective-C 中的 isKindOf 方法。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=color:#66d9ef>var</span> things: [Any] = [<span style=color:#ae81ff>42</span>, <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>hello</span><span style=color:#e6db74>&#34;</span>, { (name: String) -&gt; String <span style=color:#66d9ef>in</span> <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>Hello, </span><span style=color:#e6db74>\(</span>name<span style=color:#e6db74>)</span><span style=color:#e6db74>&#34;</span> }]

<span style=color:#66d9ef>for</span> item <span style=color:#66d9ef>in</span> things {
    <span style=color:#75715e>//</span><span style=color:#75715e> </span><span style=color:#75715e>用</span><span style=color:#75715e> </span><span style=color:#75715e>a</span><span style=color:#75715e>s</span><span style=color:#75715e>?</span><span style=color:#75715e> </span><span style=color:#75715e>进</span><span style=color:#75715e>行</span><span style=color:#75715e>类</span><span style=color:#75715e>型</span><span style=color:#75715e>转</span><span style=color:#75715e>换</span><span style=color:#75715e>，</span><span style=color:#75715e>如</span><span style=color:#75715e>果</span><span style=color:#75715e>用</span><span style=color:#75715e> </span><span style=color:#75715e>a</span><span style=color:#75715e>s</span><span style=color:#75715e>!</span><span style=color:#75715e> </span><span style=color:#75715e>来</span><span style=color:#75715e>强</span><span style=color:#75715e>制</span><span style=color:#75715e>转</span><span style=color:#75715e>换</span><span style=color:#75715e>，</span><span style=color:#75715e>当</span><span style=color:#75715e>转</span><span style=color:#75715e>换</span><span style=color:#75715e>失</span><span style=color:#75715e>败</span><span style=color:#75715e>时</span><span style=color:#75715e>会</span><span style=color:#75715e>在</span><span style=color:#75715e>运</span><span style=color:#75715e>行</span><span style=color:#75715e>时</span><span style=color:#75715e>报</span><span style=color:#75715e>错</span>
    <span style=color:#66d9ef>if</span> <span style=color:#66d9ef>let</span> intValue = item <span style=color:#66d9ef>as</span>? Int {
        print(<span style=color:#e6db74>&#34;</span><span style=color:#e6db74>intValue: </span><span style=color:#e6db74>\(</span>intValue<span style=color:#e6db74>)</span><span style=color:#e6db74>&#34;</span>)
    }
}

<span style=color:#75715e>//</span><span style=color:#75715e> </span><span style=color:#75715e>因</span><span style=color:#75715e>为</span><span style=color:#75715e>可</span><span style=color:#75715e>选</span><span style=color:#75715e>值</span><span style=color:#75715e>有</span><span style=color:#75715e>可</span><span style=color:#75715e>能</span><span style=color:#75715e>为</span><span style=color:#75715e> </span><span style=color:#75715e>n</span><span style=color:#75715e>i</span><span style=color:#75715e>l</span><span style=color:#75715e>，</span><span style=color:#75715e>所</span><span style=color:#75715e>在</span><span style=color:#75715e>再</span><span style=color:#75715e>往</span><span style=color:#75715e>数</span><span style=color:#75715e>组</span><span style=color:#75715e>里</span><span style=color:#75715e>放</span><span style=color:#75715e>时</span><span style=color:#75715e>会</span><span style=color:#75715e>有</span><span style=color:#75715e>警</span><span style=color:#75715e>告</span><span style=color:#75715e>，</span><span style=color:#75715e>避</span><span style=color:#75715e>免</span><span style=color:#75715e>出</span><span style=color:#75715e>现</span><span style=color:#75715e>警</span><span style=color:#75715e>告</span><span style=color:#75715e>可</span><span style=color:#75715e>用</span><span style=color:#75715e>下</span><span style=color:#75715e>面</span><span style=color:#75715e>两</span><span style=color:#75715e>种</span><span style=color:#75715e>方</span><span style=color:#75715e>式</span>
<span style=color:#66d9ef>let</span> optionalNumber: Int? = <span style=color:#ae81ff>3</span>
things.append(optionalNumber ?? <span style=color:#ae81ff>0</span>)
things.append(optionalNumber <span style=color:#66d9ef>as</span> Any) <span style=color:#75715e>//</span><span style=color:#75715e> </span><span style=color:#75715e>I</span><span style=color:#75715e>n</span><span style=color:#75715e>t</span><span style=color:#75715e> </span><span style=color:#75715e>t</span><span style=color:#75715e>o</span><span style=color:#75715e> </span><span style=color:#75715e>A</span><span style=color:#75715e>n</span><span style=color:#75715e>y</span>
</code></pre></div><h2 id=heading-10>运算符</h2><p>Swift 支持大部分标准 C 语言的运算符，并改进许多特性来减少常规编码错误。</p><h3 id=heading-11>赋值运算符</h3><p>Swift 的赋值操作不返回任何值，所以无法把 == 错写成 =，下面代码会在编译时报错</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=color:#66d9ef>if</span> x = y {}
</code></pre></div><h3 id=heading-12>算术运算符</h3><p>没有自增和自减运算符，加法运算符可用于字符串拼接</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=color:#66d9ef>var</span> str = <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>hello, </span><span style=color:#e6db74>&#34;</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>world</span><span style=color:#e6db74>&#34;</span>
</code></pre></div><h3 id=heading-13>比较运算符</h3><p>字符、字符串、元组等值类型值可以用 <code>&lt;</code> <code>></code> <code>==</code> 和 <code>!=</code> 来进行比较</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=color:#66d9ef>if</span> <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>apple</span><span style=color:#e6db74>&#34;</span> == <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>pen</span><span style=color:#e6db74>&#34;</span> {}
</code></pre></div><h3 id=heading-14>三目运算符</h3><p>不支持下面这种写法</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=color:#66d9ef>var</span> i = num <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> ? : <span style=color:#ae81ff>3</span>
</code></pre></div><h3 id=heading-15>空合运算符</h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=color:#66d9ef>var</span> colorName: String?

print(colorName ?? <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>red</span><span style=color:#e6db74>&#34;</span>) <span style=color:#75715e>//</span><span style=color:#75715e> </span><span style=color:#75715e>r</span><span style=color:#75715e>e</span><span style=color:#75715e>d</span>
</code></pre></div><h3 id=heading-16>区间运算符</h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=color:#66d9ef>for</span> index <span style=color:#66d9ef>in</span> <span style=color:#ae81ff>1.</span>..<span style=color:#ae81ff>5</span> {} <span style=color:#75715e>//</span><span style=color:#75715e> </span><span style=color:#75715e>闭</span><span style=color:#75715e>区</span><span style=color:#75715e>间</span><span style=color:#75715e>运</span><span style=color:#75715e>算</span><span style=color:#75715e>符</span>
</code></pre></div><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=color:#66d9ef>let</span> names = [<span style=color:#e6db74>&#34;</span><span style=color:#e6db74>Anna</span><span style=color:#e6db74>&#34;</span>, <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>Alex</span><span style=color:#e6db74>&#34;</span>, <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>Brian</span><span style=color:#e6db74>&#34;</span>, <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>Jack</span><span style=color:#e6db74>&#34;</span>]
<span style=color:#66d9ef>let</span> count = names.count

<span style=color:#66d9ef>for</span> i <span style=color:#66d9ef>in</span> <span style=color:#ae81ff>0.</span>.&lt;count {} <span style=color:#75715e>//</span><span style=color:#75715e> </span><span style=color:#75715e>半</span><span style=color:#75715e>开</span><span style=color:#75715e>区</span><span style=color:#75715e>间</span><span style=color:#75715e>运</span><span style=color:#75715e>算</span><span style=color:#75715e>符</span>
</code></pre></div><h3 id=heading-17>恒等运算符</h3><p>Swift 提供了恒等 <code>===</code> 和不恒等 <code>!==</code> 两个比较符来判断类的两个对象是否引用同一个实例，而 <code>==</code> 则是用来比较两个实例的值是否相同。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=color:#66d9ef>if</span> tenEighty === alsoTenEighty {}
</code></pre></div><h3 id=heading-18>溢出运算符</h3><p>Swift 会在数值溢出时报错，也可以通过溢出运算符在数值溢出的时候采取截断处理。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=color:#66d9ef>var</span> upOverflow = UInt8.max <span style=color:#f92672>&amp;+</span> <span style=color:#ae81ff>1</span> <span style=color:#75715e>//</span><span style=color:#75715e> </span><span style=color:#75715e>上</span><span style=color:#75715e>溢</span><span style=color:#75715e>运</span><span style=color:#75715e>算</span><span style=color:#75715e> </span><span style=color:#75715e>0</span>
<span style=color:#66d9ef>var</span> downOverflow = UInt8.min <span style=color:#f92672>&amp;-</span> <span style=color:#ae81ff>1</span> <span style=color:#75715e>//</span><span style=color:#75715e> </span><span style=color:#75715e>下</span><span style=color:#75715e>溢</span><span style=color:#75715e>运</span><span style=color:#75715e>算</span><span style=color:#75715e> </span><span style=color:#75715e>2</span><span style=color:#75715e>5</span><span style=color:#75715e>5</span>
</code></pre></div><h2 id=heading-19>控制流</h2><h3 id=if-else>if-else</h3><p>条件语句中的小括号可以省略，并加强了类型安全检查，不能够再用整型参与 Bool 判断</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=color:#66d9ef>if</span> <span style=color:#ae81ff>1</span> {}
</code></pre></div><h3 id=guard>guard</h3><p>当 guard 语句为真时执行 guard 语句下面的代码，使用 guard 做基本的安全检查能有效减少函数中的嵌套数量，并提高代码可读性。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>hello</span>(name: String?) {
    <span style=color:#66d9ef>guard</span> name <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> <span style=color:#66d9ef>else</span> {
        <span style=color:#66d9ef>return</span>
    }
    
    print(<span style=color:#e6db74>&#34;</span><span style=color:#e6db74>Hello </span><span style=color:#e6db74>\(</span>name!<span style=color:#e6db74>)</span><span style=color:#e6db74>&#34;</span>)
}
</code></pre></div><h3 id=switch>switch</h3><p>Swift 中的 switch 语句在进行数值匹配时除了支持整型和字符，还支持浮点数、字符串、元组、枚举等类型，并且 case 语句不能有遗漏，如果不愿写太多 case 可用 default 分支满足需求。当匹配的 case 分支中的代码执行完毕后，程序会终止 switch 语句，避免了因忘记写 break 而产生的错误，break 语句可以用于逻辑性的跳出 switch。如果希望能够在执行完 case 中的代码后向下掉落则需要使用 fallthrough。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=color:#66d9ef>let</span> str = <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>e</span><span style=color:#e6db74>&#34;</span>

<span style=color:#66d9ef>switch</span> str {
<span style=color:#66d9ef>case</span> <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>a</span><span style=color:#e6db74>&#34;</span>:
    <span style=color:#66d9ef>break</span>
<span style=color:#66d9ef>case</span> <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>b</span><span style=color:#e6db74>&#34;</span>, <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>B</span><span style=color:#e6db74>&#34;</span>:
    print(<span style=color:#e6db74>&#34;</span><span style=color:#e6db74>b or B</span><span style=color:#e6db74>&#34;</span>)
<span style=color:#66d9ef>case</span> <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>c</span><span style=color:#e6db74>&#34;</span>...<span style=color:#e6db74>&#34;</span><span style=color:#e6db74>e</span><span style=color:#e6db74>&#34;</span>:
    print(<span style=color:#e6db74>&#34;</span><span style=color:#e6db74>c - e</span><span style=color:#e6db74>&#34;</span>)
    <span style=color:#66d9ef>fallthrough</span>
<span style=color:#66d9ef>default</span>:
    print(<span style=color:#e6db74>&#34;</span><span style=color:#e6db74>default...</span><span style=color:#e6db74>&#34;</span>)
}
</code></pre></div><p>用 switch 语句匹配元组的值</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=color:#66d9ef>let</span> somePoint = (<span style=color:#ae81ff>3</span>, <span style=color:#ae81ff>3</span>)

<span style=color:#66d9ef>switch</span> somePoint {
<span style=color:#66d9ef>case</span> (<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>):
    print(<span style=color:#e6db74>&#34;</span><span style=color:#e6db74>(0, 0)</span><span style=color:#e6db74>&#34;</span>)
<span style=color:#66d9ef>case</span> (<span style=color:#66d9ef>_</span>, <span style=color:#ae81ff>0</span>): <span style=color:#75715e>//</span><span style=color:#75715e> </span><span style=color:#75715e>只</span><span style=color:#75715e>匹</span><span style=color:#75715e>配</span><span style=color:#75715e> </span><span style=color:#75715e>y</span><span style=color:#75715e>，</span><span style=color:#75715e>x</span><span style=color:#75715e> </span><span style=color:#75715e>可</span><span style=color:#75715e>以</span><span style=color:#75715e>是</span><span style=color:#75715e>任</span><span style=color:#75715e>何</span><span style=color:#75715e>值</span>
    print(<span style=color:#e6db74>&#34;</span><span style=color:#e6db74>(</span><span style=color:#e6db74>\(</span>somePoint.<span style=color:#ae81ff>0</span><span style=color:#e6db74>)</span><span style=color:#e6db74>, 0)</span><span style=color:#e6db74>&#34;</span>)
<span style=color:#66d9ef>case</span> (<span style=color:#f92672>-</span><span style=color:#ae81ff>2.</span>..<span style=color:#ae81ff>2</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>2.</span>..<span style=color:#ae81ff>2</span>):
    print(<span style=color:#e6db74>&#34;</span><span style=color:#e6db74>(</span><span style=color:#e6db74>\(</span>somePoint.<span style=color:#ae81ff>0</span><span style=color:#e6db74>)</span><span style=color:#e6db74>, </span><span style=color:#e6db74>\(</span>somePoint.<span style=color:#ae81ff>1</span><span style=color:#e6db74>)</span><span style=color:#e6db74>)</span><span style=color:#e6db74>&#34;</span>)
<span style=color:#66d9ef>case</span> (<span style=color:#ae81ff>0</span>, <span style=color:#66d9ef>let</span> y): <span style=color:#75715e>//</span><span style=color:#75715e> </span><span style=color:#75715e>只</span><span style=color:#75715e>匹</span><span style=color:#75715e>配</span><span style=color:#75715e> </span><span style=color:#75715e>x</span><span style=color:#75715e>，</span><span style=color:#75715e>并</span><span style=color:#75715e>且</span><span style=color:#75715e>将</span><span style=color:#75715e> </span><span style=color:#75715e>y</span><span style=color:#75715e> </span><span style=color:#75715e>的</span><span style=color:#75715e>值</span><span style=color:#75715e>赋</span><span style=color:#75715e>给</span><span style=color:#75715e>常</span><span style=color:#75715e>量</span><span style=color:#75715e> </span><span style=color:#75715e>y</span>
    print(<span style=color:#e6db74>&#34;</span><span style=color:#e6db74>0, </span><span style=color:#e6db74>\(</span>y<span style=color:#e6db74>)</span><span style=color:#e6db74>&#34;</span>)
<span style=color:#66d9ef>case</span> <span style=color:#66d9ef>let</span> (x, y) <span style=color:#66d9ef>where</span> x == y: <span style=color:#75715e>//</span><span style=color:#75715e> </span><span style=color:#75715e>通</span><span style=color:#75715e>过</span><span style=color:#75715e> </span><span style=color:#75715e>w</span><span style=color:#75715e>h</span><span style=color:#75715e>e</span><span style=color:#75715e>r</span><span style=color:#75715e>e</span><span style=color:#75715e> </span><span style=color:#75715e>来</span><span style=color:#75715e>进</span><span style=color:#75715e>行</span><span style=color:#75715e>匹</span><span style=color:#75715e>配</span>
    print(<span style=color:#e6db74>&#34;</span><span style=color:#e6db74>\(</span>x<span style=color:#e6db74>)</span><span style=color:#e6db74> == </span><span style=color:#e6db74>\(</span>y<span style=color:#e6db74>)</span><span style=color:#e6db74>&#34;</span>)
<span style=color:#66d9ef>case</span> <span style=color:#66d9ef>let</span> (x, y):
    print(<span style=color:#e6db74>&#34;</span><span style=color:#e6db74>(</span><span style=color:#e6db74>\(</span>x<span style=color:#e6db74>)</span><span style=color:#e6db74>, </span><span style=color:#e6db74>\(</span>y<span style=color:#e6db74>)</span><span style=color:#e6db74>)</span><span style=color:#e6db74>&#34;</span>)
}
</code></pre></div><h3 id=for-in>for-in</h3><p>如果不需要区间序列内每一项的值，可以使用下划线 _ 替代变量名来忽略这个值</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=color:#66d9ef>var</span> array = [<span style=color:#e6db74>&#34;</span><span style=color:#e6db74>apple</span><span style=color:#e6db74>&#34;</span>, <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>pen</span><span style=color:#e6db74>&#34;</span>, <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>apple-pen</span><span style=color:#e6db74>&#34;</span>]

<span style=color:#66d9ef>for</span> <span style=color:#66d9ef>_</span> <span style=color:#66d9ef>in</span> array {}
</code></pre></div><h3 id=while>while</h3><p>while 条件语句中的小括号可以省略，do-while 变成 repeat-while</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=color:#66d9ef>repeat</span> {} <span style=color:#66d9ef>while</span> i <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>0</span>
</code></pre></div><h2 id=heading-20>函数与闭包</h2><h3 id=heading-21>函数</h3><p>Swift 是类型安全的，所以支持参数个数相同但类型不同的函数重载</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>hello</span>(name: String) -&gt; String {
    <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>Hello, </span><span style=color:#e6db74>&#34;</span> <span style=color:#f92672>+</span> name <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>!</span><span style=color:#e6db74>&#34;</span>
}

<span style=color:#66d9ef>func</span> <span style=color:#a6e22e>hello</span>(name: Int) -&gt; String {
    <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>Hello, </span><span style=color:#e6db74>&#34;</span> <span style=color:#f92672>+</span> String(name) <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>!</span><span style=color:#e6db74>&#34;</span>
}

hello(name: <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>Lee</span><span style=color:#e6db74>&#34;</span>)
hello(name: <span style=color:#ae81ff>3</span>)
</code></pre></div><p>没有返回值的函数其实是返回了一个特殊的 Void 值，它是一个空的元组，可用()表示</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>greet</span>() {}
<span style=color:#66d9ef>func</span> <span style=color:#a6e22e>greet</span>() -&gt; () {}
<span style=color:#66d9ef>func</span> <span style=color:#a6e22e>greet</span>() -&gt; Void {}
</code></pre></div><p>参数名称默认作为参数标签来使用，我们可以自定义参数标签，也可以用 _ 来忽略参数标签，Swift 支持为参数指定默认值，为了代码可读性考虑，一般将带默认值的参数放在参数列表的最后面</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>say</span>(<span style=color:#66d9ef>_</span> prefixStr: String, parameterLabel parameterName: String = <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>lijingcheng</span><span style=color:#e6db74>&#34;</span>) -&gt; String {
    <span style=color:#66d9ef>return</span> prefixStr <span style=color:#f92672>+</span> parameterName <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>!</span><span style=color:#e6db74>&#34;</span>
}

say(<span style=color:#e6db74>&#34;</span><span style=color:#e6db74>hello, </span><span style=color:#e6db74>&#34;</span>, parameterLabel: <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>lijingcheng</span><span style=color:#e6db74>&#34;</span>)
say(<span style=color:#e6db74>&#34;</span><span style=color:#e6db74>hello, </span><span style=color:#e6db74>&#34;</span>)
</code></pre></div><p>一个函数最多只能拥有一个可变参数，可变参数可以接受零个或多个值</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>total</span>(<span style=color:#66d9ef>_</span> numbers: Double...) -&gt; Double {
    <span style=color:#66d9ef>var</span> total: Double = <span style=color:#ae81ff>0</span>
    <span style=color:#66d9ef>for</span> number <span style=color:#66d9ef>in</span> numbers {
        total <span style=color:#f92672>+=</span> number
    }
    <span style=color:#66d9ef>return</span> total
}

total(<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>3</span>, <span style=color:#ae81ff>4</span>, <span style=color:#ae81ff>5</span>)
</code></pre></div><p>函数参数默认是常量，如果要修改参数的值，可以将参数定义为输入输出参数。输入输出参数不能有默认值，而且可变参数不能用 inout 标记。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>swapTwoInts</span>(<span style=color:#66d9ef>_</span> a: <span style=color:#66d9ef>inout</span> Int, <span style=color:#66d9ef>_</span> b: <span style=color:#66d9ef>inout</span> Int) {
    <span style=color:#66d9ef>let</span> temporaryA = a
    a = b
    b = temporaryA
}

<span style=color:#66d9ef>var</span> someInt = <span style=color:#ae81ff>3</span>
<span style=color:#66d9ef>var</span> anotherInt = <span style=color:#ae81ff>107</span>
swapTwoInts(&amp;someInt, &amp;anotherInt) <span style=color:#75715e>//</span><span style=color:#75715e> </span><span style=color:#75715e>&amp;</span><span style=color:#75715e> </span><span style=color:#75715e>对</span><span style=color:#75715e>于</span><span style=color:#75715e>值</span><span style=color:#75715e>类</span><span style=color:#75715e>型</span><span style=color:#75715e>来</span><span style=color:#75715e>说</span><span style=color:#75715e> </span><span style=color:#75715e>i</span><span style=color:#75715e>n</span><span style=color:#75715e>o</span><span style=color:#75715e>u</span><span style=color:#75715e>t</span><span style=color:#75715e> </span><span style=color:#75715e>相</span><span style=color:#75715e>当</span><span style=color:#75715e>于</span><span style=color:#75715e>在</span><span style=color:#75715e>函</span><span style=color:#75715e>数</span><span style=color:#75715e>内</span><span style=color:#75715e>部</span><span style=color:#75715e>创</span><span style=color:#75715e>建</span><span style=color:#75715e>了</span><span style=color:#75715e>一</span><span style=color:#75715e>个</span><span style=color:#75715e>新</span><span style=color:#75715e>值</span><span style=color:#75715e>，</span><span style=color:#75715e>然</span><span style=color:#75715e>后</span><span style=color:#75715e>在</span><span style=color:#75715e>函</span><span style=color:#75715e>数</span><span style=color:#75715e>返</span><span style=color:#75715e>回</span><span style=color:#75715e>时</span><span style=color:#75715e>将</span><span style=color:#75715e>这</span><span style=color:#75715e>个</span><span style=color:#75715e>值</span><span style=color:#75715e>赋</span><span style=color:#75715e>给</span><span style=color:#75715e> </span><span style=color:#75715e>&amp;</span><span style=color:#75715e> </span><span style=color:#75715e>修</span><span style=color:#75715e>饰</span><span style=color:#75715e>的</span><span style=color:#75715e>变</span><span style=color:#75715e>量</span><span style=color:#75715e>，</span><span style=color:#75715e>这</span><span style=color:#75715e>与</span><span style=color:#75715e>引</span><span style=color:#75715e>用</span><span style=color:#75715e>类</span><span style=color:#75715e>型</span><span style=color:#75715e>是</span><span style=color:#75715e>不</span><span style=color:#75715e>一</span><span style=color:#75715e>样</span><span style=color:#75715e>的</span><span style=color:#75715e>。</span>
print(<span style=color:#e6db74>&#34;</span><span style=color:#e6db74>someInt is now </span><span style=color:#e6db74>\(</span>someInt<span style=color:#e6db74>)</span><span style=color:#e6db74>, and anotherInt is now </span><span style=color:#e6db74>\(</span>anotherInt<span style=color:#e6db74>)</span><span style=color:#e6db74>&#34;</span>)
</code></pre></div><p>Swift 支持我们用函数式思维来写代码，函数也作为语言的一等公民，函数其实也是一种值，Swift 支持函数类型的变量或常量，可以将函数以参数的形式传给其它函数，并且可以将一个函数作为返回值使用，还支持嵌套函数，通常称这种函数为高阶函数。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>addTwoInts</span>(a: Int, b: Int) -&gt; Int {
    <span style=color:#66d9ef>return</span> a <span style=color:#f92672>+</span> b
}

<span style=color:#66d9ef>var</span> addMathFunction = addTwoInts <span style=color:#75715e>//</span><span style=color:#75715e> </span><span style=color:#75715e>类</span><span style=color:#75715e>型</span><span style=color:#75715e>为</span><span style=color:#75715e>：</span><span style=color:#75715e>(</span><span style=color:#75715e>I</span><span style=color:#75715e>n</span><span style=color:#75715e>t</span><span style=color:#75715e>,</span><span style=color:#75715e> </span><span style=color:#75715e>I</span><span style=color:#75715e>n</span><span style=color:#75715e>t</span><span style=color:#75715e>)</span><span style=color:#75715e> </span><span style=color:#75715e>-</span><span style=color:#75715e>&gt;</span><span style=color:#75715e> </span><span style=color:#75715e>I</span><span style=color:#75715e>n</span><span style=color:#75715e>t</span>

print(addMathFunction(<span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>3</span>)) <span style=color:#75715e>//</span><span style=color:#75715e> </span><span style=color:#75715e>p</span><span style=color:#75715e>r</span><span style=color:#75715e>i</span><span style=color:#75715e>n</span><span style=color:#75715e>t</span><span style=color:#75715e>:</span><span style=color:#75715e> </span><span style=color:#75715e>5</span>


<span style=color:#66d9ef>func</span> <span style=color:#a6e22e>printMathResult</span>(<span style=color:#66d9ef>_</span> mathFunction: (Int, Int) -&gt; Int, <span style=color:#66d9ef>_</span> a: Int, <span style=color:#66d9ef>_</span> b: Int) {
    print(mathFunction(a, b))
}

printMathResult(addMathFunction, <span style=color:#ae81ff>3</span>, <span style=color:#ae81ff>5</span>) <span style=color:#75715e>//</span><span style=color:#75715e> </span><span style=color:#75715e>p</span><span style=color:#75715e>r</span><span style=color:#75715e>i</span><span style=color:#75715e>n</span><span style=color:#75715e>t</span><span style=color:#75715e>:</span><span style=color:#75715e> </span><span style=color:#75715e>8</span>
</code></pre></div><p>函数的柯里化(Currying)是指把接受多个参数的方法变换成接受第一个参数的方法，并且返回接受余下的参数并且返回结果的新方法。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>addTo</span>(<span style=color:#66d9ef>_</span> adder: Int) -&gt; (Int) -&gt; Int {
	<span style=color:#66d9ef>return</span> { num <span style=color:#66d9ef>in</span>
		<span style=color:#66d9ef>return</span> num <span style=color:#f92672>+</span> adder
	}
}

<span style=color:#66d9ef>let</span> addTwo = addTo(<span style=color:#ae81ff>2</span>) <span style=color:#75715e>//</span><span style=color:#75715e> </span><span style=color:#75715e>变</span><span style=color:#75715e>量</span><span style=color:#75715e>接</span><span style=color:#75715e>收</span><span style=color:#75715e>的</span><span style=color:#75715e>函</span><span style=color:#75715e>数</span><span style=color:#75715e>会</span><span style=color:#75715e>将</span><span style=color:#75715e> </span><span style=color:#75715e>2</span><span style=color:#75715e> </span><span style=color:#75715e>作</span><span style=color:#75715e>为</span><span style=color:#75715e>递</span><span style=color:#75715e>增</span><span style=color:#75715e>数</span>
<span style=color:#66d9ef>let</span> result = addTwo(<span style=color:#ae81ff>6</span>) <span style=color:#75715e>//</span><span style=color:#75715e> </span><span style=color:#75715e>调</span><span style=color:#75715e>用</span><span style=color:#75715e>函</span><span style=color:#75715e>数</span><span style=color:#75715e>，</span><span style=color:#75715e>将</span><span style=color:#75715e> </span><span style=color:#75715e>6</span><span style=color:#75715e> </span><span style=color:#75715e>与</span><span style=color:#75715e>预</span><span style=color:#75715e>先</span><span style=color:#75715e>设</span><span style=color:#75715e>置</span><span style=color:#75715e>的</span><span style=color:#75715e> </span><span style=color:#75715e>2</span><span style=color:#75715e> </span><span style=color:#75715e>相</span><span style=color:#75715e>加</span>
</code></pre></div><p>把函数定义在别的函数体中称作嵌套函数，下面例子中 incrementBySeven 和 incrementByTen 都是常量，但是他们指向的函数仍然可以增加其捕获的变量的值。这是因为函数和闭包都是引用类型。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>makeIncrementer</span>(forIncrement amount: Int) -&gt; () -&gt; Int {
    <span style=color:#66d9ef>var</span> runningTotal = <span style=color:#ae81ff>0</span>
    <span style=color:#66d9ef>func</span> <span style=color:#a6e22e>incrementer</span>() -&gt; Int {
        runningTotal <span style=color:#f92672>+=</span> amount
        <span style=color:#66d9ef>return</span> runningTotal
    }
    <span style=color:#66d9ef>return</span> incrementer <span style=color:#75715e>//</span><span style=color:#75715e> </span><span style=color:#75715e>返</span><span style=color:#75715e>回</span><span style=color:#75715e>内</span><span style=color:#75715e>部</span><span style=color:#75715e>函</span><span style=color:#75715e>数</span>
}

<span style=color:#66d9ef>let</span> incrementByTen = makeIncrementer(forIncrement: <span style=color:#ae81ff>10</span>) <span style=color:#75715e>//</span><span style=color:#75715e> </span><span style=color:#75715e>i</span><span style=color:#75715e>n</span><span style=color:#75715e>c</span><span style=color:#75715e>r</span><span style=color:#75715e>e</span><span style=color:#75715e>m</span><span style=color:#75715e>e</span><span style=color:#75715e>n</span><span style=color:#75715e>t</span><span style=color:#75715e>B</span><span style=color:#75715e>y</span><span style=color:#75715e>T</span><span style=color:#75715e>e</span><span style=color:#75715e>n</span><span style=color:#75715e> </span><span style=color:#75715e>为</span><span style=color:#75715e>函</span><span style=color:#75715e>数</span><span style=color:#75715e>类</span><span style=color:#75715e>型</span><span style=color:#75715e>变</span><span style=color:#75715e>量</span><span style=color:#75715e>，</span><span style=color:#75715e>并</span><span style=color:#75715e>且</span><span style=color:#75715e>无</span><span style=color:#75715e>参</span><span style=color:#75715e>，</span><span style=color:#75715e>返</span><span style=color:#75715e>回</span><span style=color:#75715e> </span><span style=color:#75715e>I</span><span style=color:#75715e>n</span><span style=color:#75715e>t</span>
incrementByTen() <span style=color:#75715e>//</span><span style=color:#75715e> </span><span style=color:#75715e>r</span><span style=color:#75715e>e</span><span style=color:#75715e>t</span><span style=color:#75715e>u</span><span style=color:#75715e>r</span><span style=color:#75715e>n</span><span style=color:#75715e> </span><span style=color:#75715e>1</span><span style=color:#75715e>0</span>
incrementByTen() <span style=color:#75715e>//</span><span style=color:#75715e> </span><span style=color:#75715e>r</span><span style=color:#75715e>e</span><span style=color:#75715e>t</span><span style=color:#75715e>u</span><span style=color:#75715e>r</span><span style=color:#75715e>n</span><span style=color:#75715e> </span><span style=color:#75715e>2</span><span style=color:#75715e>0</span>

<span style=color:#75715e>//</span><span style=color:#75715e>如</span><span style=color:#75715e>果</span><span style=color:#75715e>你</span><span style=color:#75715e>创</span><span style=color:#75715e>建</span><span style=color:#75715e>了</span><span style=color:#75715e>另</span><span style=color:#75715e>一</span><span style=color:#75715e>个</span><span style=color:#75715e> </span><span style=color:#75715e>i</span><span style=color:#75715e>n</span><span style=color:#75715e>c</span><span style=color:#75715e>r</span><span style=color:#75715e>e</span><span style=color:#75715e>m</span><span style=color:#75715e>e</span><span style=color:#75715e>n</span><span style=color:#75715e>t</span><span style=color:#75715e>e</span><span style=color:#75715e>r</span><span style=color:#75715e>，</span><span style=color:#75715e>它</span><span style=color:#75715e>会</span><span style=color:#75715e>有</span><span style=color:#75715e>属</span><span style=color:#75715e>于</span><span style=color:#75715e>自</span><span style=color:#75715e>己</span><span style=color:#75715e>的</span><span style=color:#75715e>引</span><span style=color:#75715e>用</span><span style=color:#75715e>，</span><span style=color:#75715e>指</span><span style=color:#75715e>向</span><span style=color:#75715e>一</span><span style=color:#75715e>个</span><span style=color:#75715e>全</span><span style=color:#75715e>新</span><span style=color:#75715e>、</span><span style=color:#75715e>独</span><span style=color:#75715e>立</span><span style=color:#75715e>的</span><span style=color:#75715e> </span><span style=color:#75715e>r</span><span style=color:#75715e>u</span><span style=color:#75715e>n</span><span style=color:#75715e>n</span><span style=color:#75715e>i</span><span style=color:#75715e>n</span><span style=color:#75715e>g</span><span style=color:#75715e>T</span><span style=color:#75715e>o</span><span style=color:#75715e>t</span><span style=color:#75715e>a</span><span style=color:#75715e>l</span><span style=color:#75715e> </span><span style=color:#75715e>变</span><span style=color:#75715e>量</span><span style=color:#75715e>：</span><span style=color:#75715e>i</span><span style=color:#75715e>n</span><span style=color:#75715e>c</span><span style=color:#75715e>r</span><span style=color:#75715e>e</span><span style=color:#75715e>m</span><span style=color:#75715e>e</span><span style=color:#75715e>n</span><span style=color:#75715e>t</span><span style=color:#75715e>B</span><span style=color:#75715e>y</span><span style=color:#75715e>S</span><span style=color:#75715e>e</span><span style=color:#75715e>v</span><span style=color:#75715e>e</span><span style=color:#75715e>n</span><span style=color:#75715e> </span><span style=color:#75715e>和</span><span style=color:#75715e> </span><span style=color:#75715e>i</span><span style=color:#75715e>n</span><span style=color:#75715e>c</span><span style=color:#75715e>r</span><span style=color:#75715e>e</span><span style=color:#75715e>m</span><span style=color:#75715e>e</span><span style=color:#75715e>n</span><span style=color:#75715e>t</span><span style=color:#75715e>B</span><span style=color:#75715e>y</span><span style=color:#75715e>T</span><span style=color:#75715e>e</span><span style=color:#75715e>n</span><span style=color:#75715e> </span><span style=color:#75715e>没</span><span style=color:#75715e>有</span><span style=color:#75715e>任</span><span style=color:#75715e>何</span><span style=color:#75715e>联</span><span style=color:#75715e>系</span>

<span style=color:#66d9ef>let</span> incrementBySeven = makeIncrementer(forIncrement: <span style=color:#ae81ff>7</span>)
incrementBySeven() <span style=color:#75715e>//</span><span style=color:#75715e> </span><span style=color:#75715e>r</span><span style=color:#75715e>e</span><span style=color:#75715e>t</span><span style=color:#75715e>u</span><span style=color:#75715e>r</span><span style=color:#75715e>n</span><span style=color:#75715e> </span><span style=color:#75715e>7</span>
incrementBySeven() <span style=color:#75715e>//</span><span style=color:#75715e> </span><span style=color:#75715e>r</span><span style=color:#75715e>e</span><span style=color:#75715e>t</span><span style=color:#75715e>u</span><span style=color:#75715e>r</span><span style=color:#75715e>n</span><span style=color:#75715e> </span><span style=color:#75715e>1</span><span style=color:#75715e>4</span>

incrementByTen() <span style=color:#75715e>//</span><span style=color:#75715e> </span><span style=color:#75715e>r</span><span style=color:#75715e>e</span><span style=color:#75715e>t</span><span style=color:#75715e>u</span><span style=color:#75715e>r</span><span style=color:#75715e>n</span><span style=color:#75715e> </span><span style=color:#75715e>3</span><span style=color:#75715e>0</span>
</code></pre></div><h3 id=heading-22>闭包</h3><p>闭包是自包含的函数代码块，可以在代码中被传递和使用，闭包可以捕获和存储其所在上下文中任意常量和变量的引用，即使定义这些常量和变量的原作用域已经不存在，闭包仍然可以在闭包函数体内引用和修改这些值。</p><p>全局函数和嵌套函数实际上也是特殊的闭包，全局函数是一个有名字但不会捕获任何值的闭包，嵌套函数是一个有名字并可以捕获其封闭函数域内值的闭包。闭包表达式是一个利用轻量级语法所写的可以捕获其上下文中变量或常量值的匿名闭包</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=color:#66d9ef>let</span> names = [<span style=color:#e6db74>&#34;</span><span style=color:#e6db74>Chris</span><span style=color:#e6db74>&#34;</span>, <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>Alex</span><span style=color:#e6db74>&#34;</span>, <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>Ewa</span><span style=color:#e6db74>&#34;</span>, <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>Barry</span><span style=color:#e6db74>&#34;</span>, <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>Daniella</span><span style=color:#e6db74>&#34;</span>]

names.sorted(by: { (s1: String, s2: String) -&gt; Bool <span style=color:#66d9ef>in</span>
    <span style=color:#66d9ef>return</span> s1 <span style=color:#f92672>&lt;</span> s2
})
</code></pre></div><p>Swift 可以根据闭包接收的参数和返回值推断出参数和返回值的类型，所以可以简写为下面形式，很短的函数体可以写成一行，单行表达式闭包可以省略 return，不过完整形式的闭包具有更好的代码可读性。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift>names.sorted(by: { s1, s2 <span style=color:#66d9ef>in</span> s1 <span style=color:#f92672>&lt;</span> s2 })
</code></pre></div><p>闭包的参数列表也可以省略，可以用 $0，$1，$2 来顺序调用闭包的参数</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift>names.sorted(by: {$0 <span style=color:#f92672>&lt;</span> $1})
</code></pre></div><p>Swift 的 String 重载了 > 用于比较两个字符串并返回大小，所以 sorted 函数还可以直接将 &lt; 当作闭包处理</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift>names.sorted(by: <span style=color:#f92672>&lt;</span>)
</code></pre></div><p>如果闭包表达式是函数的唯一参数，则可以作为尾随闭包来使用，以增强函数的可读性。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift>names.sorted {
    (s1, s2) -&gt; Bool <span style=color:#66d9ef>in</span>
    <span style=color:#66d9ef>return</span> s1 <span style=color:#f92672>&lt;</span> s2
}
</code></pre></div><p>当定义接受闭包作为参数的函数时，可以用 @escaping 来标注参数名称，用来指明这个闭包是允许“逃逸”出这个函数的，这样我们就可以用一个变量或常量来接收闭包，并在适当的时候调用它，如果将一个闭包标记为 @escaping 意味着你必须在闭包中显式地引用 self。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=color:#66d9ef>var</span> closures = {}

<span style=color:#66d9ef>func</span> <span style=color:#a6e22e>someFunctionWithEscapingClosure</span>(completionHandler: @escaping () -&gt; Void) {
    closures = completionHandler
}

<span style=color:#66d9ef>var</span> customersInLine = [<span style=color:#e6db74>&#34;</span><span style=color:#e6db74>Chris</span><span style=color:#e6db74>&#34;</span>, <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>Alex</span><span style=color:#e6db74>&#34;</span>, <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>Ewa</span><span style=color:#e6db74>&#34;</span>, <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>Barry</span><span style=color:#e6db74>&#34;</span>, <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>Daniella</span><span style=color:#e6db74>&#34;</span>]

someFunctionWithEscapingClosure { customersInLine.remove(at: <span style=color:#ae81ff>0</span>) }

print(customersInLine.count) <span style=color:#75715e>//</span><span style=color:#75715e> </span><span style=color:#75715e>p</span><span style=color:#75715e>r</span><span style=color:#75715e>i</span><span style=color:#75715e>n</span><span style=color:#75715e>t</span><span style=color:#75715e>:</span><span style=color:#75715e> </span><span style=color:#75715e>5</span>
closures() <span style=color:#75715e>//</span><span style=color:#75715e> </span><span style=color:#75715e>执</span><span style=color:#75715e>行</span><span style=color:#75715e>闭</span><span style=color:#75715e>包</span>
print(customersInLine.count) <span style=color:#75715e>//</span><span style=color:#75715e> </span><span style=color:#75715e>p</span><span style=color:#75715e>r</span><span style=color:#75715e>i</span><span style=color:#75715e>n</span><span style=color:#75715e>t</span><span style=color:#75715e>:</span><span style=color:#75715e> </span><span style=color:#75715e>4</span>
</code></pre></div><h2 id=heading-23>枚举</h2><p>Swift 的枚举成员在被创建时不会被赋予一个默认的整型值，枚举成员本身就是完备的值，多个成员值可以用逗号分隔并定义在一行上</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=color:#66d9ef>enum</span> <span style=color:#a6e22e>CompassPoint</span> {
    <span style=color:#66d9ef>case</span> north, south, east, west
}

<span style=color:#66d9ef>var</span> directionToHead = CompassPoint.west
directionToHead = .east <span style=color:#75715e>//</span><span style=color:#75715e> </span><span style=color:#75715e>当</span><span style=color:#75715e> </span><span style=color:#75715e>d</span><span style=color:#75715e>i</span><span style=color:#75715e>r</span><span style=color:#75715e>e</span><span style=color:#75715e>c</span><span style=color:#75715e>t</span><span style=color:#75715e>i</span><span style=color:#75715e>o</span><span style=color:#75715e>n</span><span style=color:#75715e>T</span><span style=color:#75715e>o</span><span style=color:#75715e>H</span><span style=color:#75715e>e</span><span style=color:#75715e>a</span><span style=color:#75715e>d</span><span style=color:#75715e> </span><span style=color:#75715e>的</span><span style=color:#75715e>类</span><span style=color:#75715e>型</span><span style=color:#75715e>已</span><span style=color:#75715e>知</span><span style=color:#75715e>时</span><span style=color:#75715e>，</span><span style=color:#75715e>再</span><span style=color:#75715e>次</span><span style=color:#75715e>为</span><span style=color:#75715e>其</span><span style=color:#75715e>赋</span><span style=color:#75715e>值</span><span style=color:#75715e>可</span><span style=color:#75715e>以</span><span style=color:#75715e>省</span><span style=color:#75715e>略</span><span style=color:#75715e>枚</span><span style=color:#75715e>举</span><span style=color:#75715e>类</span><span style=color:#75715e>型</span><span style=color:#75715e>名</span>
</code></pre></div><p>枚举成员虽然没有默认值，但是可以给它指定原始值，类型可以是字符串、字符、整型、浮点数，这些原始值一旦设置了就不能再改变，并且值在枚举声明中必须是唯一的而且类型必须相同，使用枚举成员的 rawValue 属性可以访问该成员的原始值。在使用原始值为整数或者字符串类型的枚举时，通常不需要显式地为每一个枚举成员设置原始值，Swift 会自动赋值。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=color:#66d9ef>enum</span> <span style=color:#a6e22e>CompassPoint2</span>: String {
    <span style=color:#66d9ef>case</span> north, south, east, west
}

<span style=color:#66d9ef>let</span> sunsetDirection2 = CompassPoint2.west.rawValue <span style=color:#75715e>//</span><span style=color:#75715e> </span><span style=color:#75715e>“</span><span style=color:#75715e>w</span><span style=color:#75715e>e</span><span style=color:#75715e>s</span><span style=color:#75715e>t</span><span style=color:#75715e>”</span>
</code></pre></div><p>当使用整数作为原始值时，隐式赋值的值依次递增1。如果第一个枚举成员没有设置原始值，其原始值将为0。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=color:#66d9ef>enum</span> <span style=color:#a6e22e>CompassPoint3</span>: Int {
    <span style=color:#66d9ef>case</span> north = <span style=color:#ae81ff>1</span>, south, east, west
}

<span style=color:#66d9ef>let</span> earthsOrder = CompassPoint3.east.rawValue <span style=color:#75715e>//</span><span style=color:#75715e> </span><span style=color:#75715e>3</span>

<span style=color:#75715e>//</span><span style=color:#75715e> </span><span style=color:#75715e>如</span><span style=color:#75715e>果</span><span style=color:#75715e>在</span><span style=color:#75715e>定</span><span style=color:#75715e>义</span><span style=color:#75715e>枚</span><span style=color:#75715e>举</span><span style=color:#75715e>类</span><span style=color:#75715e>型</span><span style=color:#75715e>的</span><span style=color:#75715e>时</span><span style=color:#75715e>候</span><span style=color:#75715e>使</span><span style=color:#75715e>用</span><span style=color:#75715e>了</span><span style=color:#75715e>原</span><span style=color:#75715e>始</span><span style=color:#75715e>值</span><span style=color:#75715e>，</span><span style=color:#75715e>那</span><span style=color:#75715e>么</span><span style=color:#75715e>将</span><span style=color:#75715e>会</span><span style=color:#75715e>自</span><span style=color:#75715e>动</span><span style=color:#75715e>获</span><span style=color:#75715e>得</span><span style=color:#75715e>一</span><span style=color:#75715e>个</span><span style=color:#75715e>初</span><span style=color:#75715e>始</span><span style=color:#75715e>化</span><span style=color:#75715e>方</span><span style=color:#75715e>法</span><span style=color:#75715e>，</span><span style=color:#75715e>这</span><span style=color:#75715e>个</span><span style=color:#75715e>方</span><span style=color:#75715e>法</span><span style=color:#75715e>接</span><span style=color:#75715e>收</span><span style=color:#75715e>一</span><span style=color:#75715e>个</span><span style=color:#75715e>叫</span><span style=color:#75715e>做</span><span style=color:#75715e> </span><span style=color:#75715e>r</span><span style=color:#75715e>a</span><span style=color:#75715e>w</span><span style=color:#75715e>V</span><span style=color:#75715e>a</span><span style=color:#75715e>l</span><span style=color:#75715e>u</span><span style=color:#75715e>e</span><span style=color:#75715e> </span><span style=color:#75715e>的</span><span style=color:#75715e>参</span><span style=color:#75715e>数</span><span style=color:#75715e>，</span><span style=color:#75715e>参</span><span style=color:#75715e>数</span><span style=color:#75715e>类</span><span style=color:#75715e>型</span><span style=color:#75715e>即</span><span style=color:#75715e>为</span><span style=color:#75715e>原</span><span style=color:#75715e>始</span><span style=color:#75715e>值</span><span style=color:#75715e>类</span><span style=color:#75715e>型</span><span style=color:#75715e>，</span><span style=color:#75715e>返</span><span style=color:#75715e>回</span><span style=color:#75715e>值</span><span style=color:#75715e>则</span><span style=color:#75715e>是</span><span style=color:#75715e>枚</span><span style=color:#75715e>举</span><span style=color:#75715e>成</span><span style=color:#75715e>员</span><span style=color:#75715e>或</span><span style=color:#75715e> </span><span style=color:#75715e>n</span><span style=color:#75715e>i</span><span style=color:#75715e>l</span><span style=color:#75715e>。</span>
<span style=color:#66d9ef>let</span> possiblePlanet = CompassPoint3(rawValue: <span style=color:#ae81ff>2</span>) <span style=color:#75715e>//</span><span style=color:#75715e> </span><span style=color:#75715e>s</span><span style=color:#75715e>o</span><span style=color:#75715e>u</span><span style=color:#75715e>t</span><span style=color:#75715e>h</span>
<span style=color:#66d9ef>let</span> possiblePlanet2 = CompassPoint3(rawValue: <span style=color:#ae81ff>6</span>) <span style=color:#75715e>//</span><span style=color:#75715e> </span><span style=color:#75715e>n</span><span style=color:#75715e>i</span><span style=color:#75715e>l</span>
</code></pre></div><p>如果不为枚举成员指定原始值，那么就可以指定任意类型的关联值存储到枚举成员中，每个枚举成员都可以有不同类型的关联值，并且关联值可以修改。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=color:#66d9ef>enum</span> <span style=color:#a6e22e>Barcode</span> {
    <span style=color:#66d9ef>case</span> upc(Int, Int, Int, Int)
    <span style=color:#66d9ef>case</span> qrCode(String)
}

<span style=color:#66d9ef>var</span> productBarcode = Barcode.upc(<span style=color:#ae81ff>8</span>, <span style=color:#ae81ff>85909</span>, <span style=color:#ae81ff>51226</span>, <span style=color:#ae81ff>3</span>) <span style=color:#75715e>//</span><span style=color:#75715e> </span><span style=color:#75715e>.</span><span style=color:#75715e>u</span><span style=color:#75715e>p</span><span style=color:#75715e>c</span><span style=color:#75715e>关</span><span style=color:#75715e>联</span><span style=color:#75715e>的</span><span style=color:#75715e>元</span><span style=color:#75715e>组</span><span style=color:#75715e>值</span><span style=color:#75715e>为</span><span style=color:#75715e>(</span><span style=color:#75715e>8</span><span style=color:#75715e>,</span><span style=color:#75715e> </span><span style=color:#75715e>8</span><span style=color:#75715e>5</span><span style=color:#75715e>9</span><span style=color:#75715e>0</span><span style=color:#75715e>9</span><span style=color:#75715e>,</span><span style=color:#75715e> </span><span style=color:#75715e>5</span><span style=color:#75715e>1</span><span style=color:#75715e>2</span><span style=color:#75715e>2</span><span style=color:#75715e>6</span><span style=color:#75715e>,</span><span style=color:#75715e> </span><span style=color:#75715e>3</span><span style=color:#75715e>)</span><span style=color:#75715e>。</span>
productBarcode = .qrCode(<span style=color:#e6db74>&#34;</span><span style=color:#e6db74>ABCDEFGHIJKLMNOP</span><span style=color:#e6db74>&#34;</span>)

<span style=color:#75715e>//</span><span style=color:#75715e>关</span><span style=color:#75715e>联</span><span style=color:#75715e>值</span><span style=color:#75715e>可</span><span style=color:#75715e>以</span><span style=color:#75715e>被</span><span style=color:#75715e>提</span><span style=color:#75715e>取</span><span style=color:#75715e>出</span><span style=color:#75715e>来</span><span style=color:#75715e>作</span><span style=color:#75715e>为</span><span style=color:#75715e> </span><span style=color:#75715e>s</span><span style=color:#75715e>w</span><span style=color:#75715e>i</span><span style=color:#75715e>t</span><span style=color:#75715e>c</span><span style=color:#75715e>h</span><span style=color:#75715e> </span><span style=color:#75715e>语</span><span style=color:#75715e>句</span><span style=color:#75715e>的</span><span style=color:#75715e>一</span><span style=color:#75715e>部</span><span style=color:#75715e>分</span><span style=color:#75715e>。</span><span style=color:#75715e>你</span><span style=color:#75715e>可</span><span style=color:#75715e>以</span><span style=color:#75715e>在</span><span style=color:#75715e>s</span><span style=color:#75715e>w</span><span style=color:#75715e>i</span><span style=color:#75715e>t</span><span style=color:#75715e>c</span><span style=color:#75715e>h</span><span style=color:#75715e>的</span><span style=color:#75715e> </span><span style=color:#75715e>c</span><span style=color:#75715e>a</span><span style=color:#75715e>s</span><span style=color:#75715e>e</span><span style=color:#75715e> </span><span style=color:#75715e>分</span><span style=color:#75715e>支</span><span style=color:#75715e>代</span><span style=color:#75715e>码</span><span style=color:#75715e>中</span><span style=color:#75715e>提</span><span style=color:#75715e>取</span><span style=color:#75715e>每</span><span style=color:#75715e>个</span><span style=color:#75715e>关</span><span style=color:#75715e>联</span><span style=color:#75715e>值</span><span style=color:#75715e>作</span><span style=color:#75715e>为</span><span style=color:#75715e>一</span><span style=color:#75715e>个</span><span style=color:#75715e>常</span><span style=color:#75715e>量</span><span style=color:#75715e>（</span><span style=color:#75715e>用</span><span style=color:#75715e>l</span><span style=color:#75715e>e</span><span style=color:#75715e>t</span><span style=color:#75715e>前</span><span style=color:#75715e>缀</span><span style=color:#75715e>）</span><span style=color:#75715e>或</span><span style=color:#75715e>者</span><span style=color:#75715e>作</span><span style=color:#75715e>为</span><span style=color:#75715e>一</span><span style=color:#75715e>个</span><span style=color:#75715e>变</span><span style=color:#75715e>量</span><span style=color:#75715e>（</span><span style=color:#75715e>用</span><span style=color:#75715e>v</span><span style=color:#75715e>a</span><span style=color:#75715e>r</span><span style=color:#75715e>前</span><span style=color:#75715e>缀</span><span style=color:#75715e>）</span><span style=color:#75715e>来</span><span style=color:#75715e>使</span><span style=color:#75715e>用</span><span style=color:#75715e>：</span>
<span style=color:#66d9ef>switch</span> productBarcode {
<span style=color:#66d9ef>case</span> .upc(<span style=color:#66d9ef>let</span> numberSystem, <span style=color:#66d9ef>let</span> manufacturer, <span style=color:#66d9ef>let</span> product, <span style=color:#66d9ef>let</span> check):
    print(<span style=color:#e6db74>&#34;</span><span style=color:#e6db74>UPC: </span><span style=color:#e6db74>\(</span>numberSystem<span style=color:#e6db74>)</span><span style=color:#e6db74>, </span><span style=color:#e6db74>\(</span>manufacturer<span style=color:#e6db74>)</span><span style=color:#e6db74>, </span><span style=color:#e6db74>\(</span>product<span style=color:#e6db74>)</span><span style=color:#e6db74>, </span><span style=color:#e6db74>\(</span>check<span style=color:#e6db74>)</span><span style=color:#e6db74>.</span><span style=color:#e6db74>&#34;</span>)
<span style=color:#66d9ef>case</span> .qrCode(<span style=color:#66d9ef>let</span> productCode):
    print(<span style=color:#e6db74>&#34;</span><span style=color:#e6db74>QR code: </span><span style=color:#e6db74>\(</span>productCode<span style=color:#e6db74>)</span><span style=color:#e6db74>.</span><span style=color:#e6db74>&#34;</span>)
}

<span style=color:#75715e>//</span><span style=color:#75715e>如</span><span style=color:#75715e>果</span><span style=color:#75715e>一</span><span style=color:#75715e>个</span><span style=color:#75715e>枚</span><span style=color:#75715e>举</span><span style=color:#75715e>成</span><span style=color:#75715e>员</span><span style=color:#75715e>的</span><span style=color:#75715e>所</span><span style=color:#75715e>有</span><span style=color:#75715e>关</span><span style=color:#75715e>联</span><span style=color:#75715e>值</span><span style=color:#75715e>都</span><span style=color:#75715e>被</span><span style=color:#75715e>提</span><span style=color:#75715e>取</span><span style=color:#75715e>为</span><span style=color:#75715e>常</span><span style=color:#75715e>量</span><span style=color:#75715e>，</span><span style=color:#75715e>或</span><span style=color:#75715e>者</span><span style=color:#75715e>都</span><span style=color:#75715e>被</span><span style=color:#75715e>提</span><span style=color:#75715e>取</span><span style=color:#75715e>为</span><span style=color:#75715e>变</span><span style=color:#75715e>量</span><span style=color:#75715e>，</span><span style=color:#75715e>为</span><span style=color:#75715e>了</span><span style=color:#75715e>简</span><span style=color:#75715e>洁</span><span style=color:#75715e>，</span><span style=color:#75715e>你</span><span style=color:#75715e>可</span><span style=color:#75715e>以</span><span style=color:#75715e>只</span><span style=color:#75715e>在</span><span style=color:#75715e>成</span><span style=color:#75715e>员</span><span style=color:#75715e>名</span><span style=color:#75715e>称</span><span style=color:#75715e>前</span><span style=color:#75715e>标</span><span style=color:#75715e>注</span><span style=color:#75715e>一</span><span style=color:#75715e>个</span><span style=color:#75715e>l</span><span style=color:#75715e>e</span><span style=color:#75715e>t</span><span style=color:#75715e>或</span><span style=color:#75715e>者</span><span style=color:#75715e>v</span><span style=color:#75715e>a</span><span style=color:#75715e>r</span><span style=color:#75715e>：</span>
<span style=color:#66d9ef>switch</span> productBarcode {
<span style=color:#66d9ef>case</span> <span style=color:#66d9ef>let</span> .upc(numberSystem, manufacturer, product, check):
    print(<span style=color:#e6db74>&#34;</span><span style=color:#e6db74>UPC: </span><span style=color:#e6db74>\(</span>numberSystem<span style=color:#e6db74>)</span><span style=color:#e6db74>, </span><span style=color:#e6db74>\(</span>manufacturer<span style=color:#e6db74>)</span><span style=color:#e6db74>, </span><span style=color:#e6db74>\(</span>product<span style=color:#e6db74>)</span><span style=color:#e6db74>, </span><span style=color:#e6db74>\(</span>check<span style=color:#e6db74>)</span><span style=color:#e6db74>.</span><span style=color:#e6db74>&#34;</span>)
<span style=color:#66d9ef>case</span> <span style=color:#66d9ef>let</span> .qrCode(productCode):
    print(<span style=color:#e6db74>&#34;</span><span style=color:#e6db74>QR code: </span><span style=color:#e6db74>\(</span>productCode<span style=color:#e6db74>)</span><span style=color:#e6db74>.</span><span style=color:#e6db74>&#34;</span>)
}
</code></pre></div><h2 id=heading-24>类和结构体</h2><p>Swift 中的所有的基本类型和枚举都是值类型，它们在底层都是以结构体的形式所实现，所以结构体是值类型，类是引用类型。值类型数据在进行函数传递时会被拷贝，引用类型不会。当定义数据结构的目的是用来封装简单的数据值，并且希望该数据结构在被赋值或传递时，封装的数据及其内部存储的属性也能够通过值传递，那么适合用结构体来定义它。</p><p>Swift 中类和结构体都支持属性、方法、下标、构造器、扩展和协议，与结构体相比，类还支持继承、多态、用析构器释放所分配资源以及用引用计数对一个类进行多次引用。另外引用类型对象存储在堆上，值类型在栈上，栈的操作仅仅是指针的上下移动，而堆的操作会因内存的分配和回收产生合并、移位、重新链接等行为，所以使用结构体效率会高一些。另外值类型在复制时，复制的对象和原对象实际上在内存中指向同一个对象。只有当复制后的对象被修改时才会在内存中重新创建一个新的对象，通过 copy-on-write 这种的方式提高效率。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=color:#66d9ef>struct</span> <span style=color:#a6e22e>Range</span> {
    <span style=color:#75715e>//</span><span style=color:#75715e> </span><span style=color:#75715e>O</span><span style=color:#75715e>b</span><span style=color:#75715e>j</span><span style=color:#75715e>e</span><span style=color:#75715e>c</span><span style=color:#75715e>t</span><span style=color:#75715e>i</span><span style=color:#75715e>v</span><span style=color:#75715e>e</span><span style=color:#75715e>-</span><span style=color:#75715e>C</span><span style=color:#75715e> </span><span style=color:#75715e>和</span><span style=color:#75715e> </span><span style=color:#75715e>S</span><span style=color:#75715e>w</span><span style=color:#75715e>i</span><span style=color:#75715e>f</span><span style=color:#75715e>t</span><span style=color:#75715e> </span><span style=color:#75715e>中</span><span style=color:#75715e>的</span><span style=color:#75715e>属</span><span style=color:#75715e>性</span><span style=color:#75715e>定</span><span style=color:#75715e>义</span><span style=color:#75715e>其</span><span style=color:#75715e>实</span><span style=color:#75715e>都</span><span style=color:#75715e>是</span><span style=color:#75715e> </span><span style=color:#75715e>s</span><span style=color:#75715e>e</span><span style=color:#75715e>t</span><span style=color:#75715e>t</span><span style=color:#75715e>e</span><span style=color:#75715e>r</span><span style=color:#75715e>/</span><span style=color:#75715e>g</span><span style=color:#75715e>e</span><span style=color:#75715e>t</span><span style=color:#75715e>t</span><span style=color:#75715e>e</span><span style=color:#75715e>r</span><span style=color:#75715e> </span><span style=color:#75715e>方</span><span style=color:#75715e>法</span><span style=color:#75715e>的</span><span style=color:#75715e>声</span><span style=color:#75715e>明</span><span style=color:#75715e>，</span><span style=color:#75715e>其</span><span style=color:#75715e>背</span><span style=color:#75715e>后</span><span style=color:#75715e>还</span><span style=color:#75715e>对</span><span style=color:#75715e>应</span><span style=color:#75715e>一</span><span style=color:#75715e>个</span><span style=color:#75715e>实</span><span style=color:#75715e>例</span><span style=color:#75715e>变</span><span style=color:#75715e>量</span><span style=color:#75715e>，</span><span style=color:#75715e>但</span><span style=color:#75715e>是</span><span style=color:#75715e>在</span><span style=color:#75715e> </span><span style=color:#75715e>S</span><span style=color:#75715e>w</span><span style=color:#75715e>i</span><span style=color:#75715e>f</span><span style=color:#75715e>t</span><span style=color:#75715e> </span><span style=color:#75715e>中</span><span style=color:#75715e>不</span><span style=color:#75715e>能</span><span style=color:#75715e>直</span><span style=color:#75715e>接</span><span style=color:#75715e>访</span><span style=color:#75715e>问</span><span style=color:#75715e>。</span><span style=color:#75715e>在</span><span style=color:#75715e> </span><span style=color:#75715e>S</span><span style=color:#75715e>w</span><span style=color:#75715e>i</span><span style=color:#75715e>f</span><span style=color:#75715e>t</span><span style=color:#75715e> </span><span style=color:#75715e>中</span><span style=color:#75715e>属</span><span style=color:#75715e>性</span><span style=color:#75715e>默</span><span style=color:#75715e>认</span><span style=color:#75715e>为</span><span style=color:#75715e> </span><span style=color:#75715e>n</span><span style=color:#75715e>o</span><span style=color:#75715e>n</span><span style=color:#75715e>a</span><span style=color:#75715e>t</span><span style=color:#75715e>o</span><span style=color:#75715e>m</span><span style=color:#75715e>i</span><span style=color:#75715e>c</span><span style=color:#75715e> </span><span style=color:#75715e>和</span><span style=color:#75715e> </span><span style=color:#75715e>s</span><span style=color:#75715e>t</span><span style=color:#75715e>r</span><span style=color:#75715e>o</span><span style=color:#75715e>n</span><span style=color:#75715e>g</span><span style=color:#75715e>，</span><span style=color:#75715e>可</span><span style=color:#75715e>改</span><span style=color:#75715e>用</span><span style=color:#75715e> </span><span style=color:#75715e>w</span><span style=color:#75715e>e</span><span style=color:#75715e>a</span><span style=color:#75715e>k</span><span style=color:#75715e> </span><span style=color:#75715e>v</span><span style=color:#75715e>a</span><span style=color:#75715e>r</span><span style=color:#75715e> </span><span style=color:#75715e>.</span><span style=color:#75715e>.</span><span style=color:#75715e>.</span>
    <span style=color:#66d9ef>var</span> location: Int
    <span style=color:#66d9ef>var</span> length: Int
    
    <span style=color:#75715e>//</span><span style=color:#75715e> </span><span style=color:#75715e>函</span><span style=color:#75715e>数</span><span style=color:#75715e>与</span><span style=color:#75715e>某</span><span style=color:#75715e>个</span><span style=color:#75715e>类</span><span style=color:#75715e>型</span><span style=color:#75715e>相</span><span style=color:#75715e>关</span><span style=color:#75715e>联</span><span style=color:#75715e>后</span><span style=color:#75715e>通</span><span style=color:#75715e>常</span><span style=color:#75715e>称</span><span style=color:#75715e>为</span><span style=color:#75715e>方</span><span style=color:#75715e>法</span><span style=color:#75715e>，</span><span style=color:#75715e>结</span><span style=color:#75715e>构</span><span style=color:#75715e>体</span><span style=color:#75715e>和</span><span style=color:#75715e>枚</span><span style=color:#75715e>举</span><span style=color:#75715e>是</span><span style=color:#75715e>值</span><span style=color:#75715e>类</span><span style=color:#75715e>型</span><span style=color:#75715e>。</span><span style=color:#75715e>默</span><span style=color:#75715e>认</span><span style=color:#75715e>情</span><span style=color:#75715e>况</span><span style=color:#75715e>下</span><span style=color:#75715e>，</span><span style=color:#75715e>值</span><span style=color:#75715e>类</span><span style=color:#75715e>型</span><span style=color:#75715e>的</span><span style=color:#75715e>属</span><span style=color:#75715e>性</span><span style=color:#75715e>不</span><span style=color:#75715e>能</span><span style=color:#75715e>在</span><span style=color:#75715e>它</span><span style=color:#75715e>的</span><span style=color:#75715e>实</span><span style=color:#75715e>例</span><span style=color:#75715e>方</span><span style=color:#75715e>法</span><span style=color:#75715e>中</span><span style=color:#75715e>被</span><span style=color:#75715e>修</span><span style=color:#75715e>改</span><span style=color:#75715e>。</span><span style=color:#75715e>但</span><span style=color:#75715e>是</span><span style=color:#75715e>可</span><span style=color:#75715e>以</span><span style=color:#75715e>为</span><span style=color:#75715e>这</span><span style=color:#75715e>个</span><span style=color:#75715e>方</span><span style=color:#75715e>法</span><span style=color:#75715e>选</span><span style=color:#75715e>择</span><span style=color:#75715e>可</span><span style=color:#75715e>变</span><span style=color:#75715e>(</span><span style=color:#75715e>m</span><span style=color:#75715e>u</span><span style=color:#75715e>t</span><span style=color:#75715e>a</span><span style=color:#75715e>t</span><span style=color:#75715e>i</span><span style=color:#75715e>n</span><span style=color:#75715e>g</span><span style=color:#75715e>)</span><span style=color:#75715e>行</span><span style=color:#75715e>为</span><span style=color:#75715e>，</span><span style=color:#75715e>然</span><span style=color:#75715e>后</span><span style=color:#75715e>就</span><span style=color:#75715e>可</span><span style=color:#75715e>以</span><span style=color:#75715e>从</span><span style=color:#75715e>其</span><span style=color:#75715e>方</span><span style=color:#75715e>法</span><span style=color:#75715e>内</span><span style=color:#75715e>部</span><span style=color:#75715e>改</span><span style=color:#75715e>变</span><span style=color:#75715e>它</span><span style=color:#75715e>的</span><span style=color:#75715e>属</span><span style=color:#75715e>性</span><span style=color:#75715e>，</span><span style=color:#75715e>甚</span><span style=color:#75715e>至</span><span style=color:#75715e>修</span><span style=color:#75715e>改</span><span style=color:#75715e> </span><span style=color:#75715e>s</span><span style=color:#75715e>e</span><span style=color:#75715e>l</span><span style=color:#75715e>f</span><span style=color:#75715e> </span><span style=color:#75715e>（</span><span style=color:#75715e>引</span><span style=color:#75715e>用</span><span style=color:#75715e>类</span><span style=color:#75715e>型</span><span style=color:#75715e>可</span><span style=color:#75715e>以</span><span style=color:#75715e>直</span><span style=color:#75715e>接</span><span style=color:#75715e>修</span><span style=color:#75715e>改</span><span style=color:#75715e>）</span>
    <span style=color:#66d9ef>mutating</span> <span style=color:#66d9ef>func</span> <span style=color:#a6e22e>moveBy</span>(<span style=color:#66d9ef>_</span> step: Int) {
        location <span style=color:#f92672>+=</span> step <span style=color:#75715e>//</span><span style=color:#75715e> </span><span style=color:#75715e>通</span><span style=color:#75715e>常</span><span style=color:#75715e>只</span><span style=color:#75715e>有</span><span style=color:#75715e>当</span><span style=color:#75715e>属</span><span style=color:#75715e>性</span><span style=color:#75715e>和</span><span style=color:#75715e>参</span><span style=color:#75715e>数</span><span style=color:#75715e>名</span><span style=color:#75715e>称</span><span style=color:#75715e>一</span><span style=color:#75715e>样</span><span style=color:#75715e>时</span><span style=color:#75715e>才</span><span style=color:#75715e>用</span><span style=color:#75715e> </span><span style=color:#75715e>s</span><span style=color:#75715e>e</span><span style=color:#75715e>l</span><span style=color:#75715e>f</span><span style=color:#75715e>.</span><span style=color:#75715e> </span><span style=color:#75715e>方</span><span style=color:#75715e>式</span><span style=color:#75715e>进</span><span style=color:#75715e>行</span><span style=color:#75715e>赋</span><span style=color:#75715e>值</span>
    }
}

<span style=color:#66d9ef>var</span> range = Range(location: <span style=color:#ae81ff>0</span>, length: <span style=color:#ae81ff>3</span>) <span style=color:#75715e>//</span><span style=color:#75715e> </span><span style=color:#75715e>所</span><span style=color:#75715e>有</span><span style=color:#75715e>结</span><span style=color:#75715e>构</span><span style=color:#75715e>体</span><span style=color:#75715e>都</span><span style=color:#75715e>有</span><span style=color:#75715e>一</span><span style=color:#75715e>个</span><span style=color:#75715e>自</span><span style=color:#75715e>动</span><span style=color:#75715e>生</span><span style=color:#75715e>成</span><span style=color:#75715e>的</span><span style=color:#75715e>成</span><span style=color:#75715e>员</span><span style=color:#75715e>逐</span><span style=color:#75715e>一</span><span style=color:#75715e>构</span><span style=color:#75715e>造</span><span style=color:#75715e>器</span><span style=color:#75715e>，</span><span style=color:#75715e>用</span><span style=color:#75715e>于</span><span style=color:#75715e>初</span><span style=color:#75715e>始</span><span style=color:#75715e>化</span><span style=color:#75715e>新</span><span style=color:#75715e>结</span><span style=color:#75715e>构</span><span style=color:#75715e>体</span><span style=color:#75715e>实</span><span style=color:#75715e>例</span><span style=color:#75715e>中</span><span style=color:#75715e>成</span><span style=color:#75715e>员</span><span style=color:#75715e>的</span><span style=color:#75715e>属</span><span style=color:#75715e>性</span><span style=color:#75715e>，</span><span style=color:#75715e>类</span><span style=color:#75715e>实</span><span style=color:#75715e>例</span><span style=color:#75715e>没</span><span style=color:#75715e>有</span><span style=color:#75715e>。</span><span style=color:#75715e>因</span><span style=color:#75715e>为</span><span style=color:#75715e>结</span><span style=color:#75715e>构</span><span style=color:#75715e>体</span><span style=color:#75715e>属</span><span style=color:#75715e>于</span><span style=color:#75715e>值</span><span style=color:#75715e>类</span><span style=color:#75715e>型</span><span style=color:#75715e>。</span><span style=color:#75715e>当</span><span style=color:#75715e>值</span><span style=color:#75715e>类</span><span style=color:#75715e>型</span><span style=color:#75715e>的</span><span style=color:#75715e>实</span><span style=color:#75715e>例</span><span style=color:#75715e>被</span><span style=color:#75715e>声</span><span style=color:#75715e>明</span><span style=color:#75715e>为</span><span style=color:#75715e>常</span><span style=color:#75715e>量</span><span style=color:#75715e>的</span><span style=color:#75715e>时</span><span style=color:#75715e>候</span><span style=color:#75715e>，</span><span style=color:#75715e>它</span><span style=color:#75715e>的</span><span style=color:#75715e>所</span><span style=color:#75715e>有</span><span style=color:#75715e>属</span><span style=color:#75715e>性</span><span style=color:#75715e>也</span><span style=color:#75715e>就</span><span style=color:#75715e>成</span><span style=color:#75715e>了</span><span style=color:#75715e>常</span><span style=color:#75715e>量</span><span style=color:#75715e>，</span><span style=color:#75715e>并</span><span style=color:#75715e>且</span><span style=color:#75715e> </span><span style=color:#75715e>m</span><span style=color:#75715e>u</span><span style=color:#75715e>t</span><span style=color:#75715e>a</span><span style=color:#75715e>t</span><span style=color:#75715e>i</span><span style=color:#75715e>n</span><span style=color:#75715e>g</span><span style=color:#75715e> </span><span style=color:#75715e>方</span><span style=color:#75715e>法</span><span style=color:#75715e>也</span><span style=color:#75715e>不</span><span style=color:#75715e>可</span><span style=color:#75715e>以</span><span style=color:#75715e>被</span><span style=color:#75715e>调</span><span style=color:#75715e>用</span><span style=color:#75715e>。</span>
range.location = <span style=color:#ae81ff>1</span> <span style=color:#75715e>//</span><span style=color:#75715e> </span><span style=color:#75715e>S</span><span style=color:#75715e>w</span><span style=color:#75715e>i</span><span style=color:#75715e>f</span><span style=color:#75715e>t</span><span style=color:#75715e> </span><span style=color:#75715e>允</span><span style=color:#75715e>许</span><span style=color:#75715e>直</span><span style=color:#75715e>接</span><span style=color:#75715e>设</span><span style=color:#75715e>置</span><span style=color:#75715e>结</span><span style=color:#75715e>构</span><span style=color:#75715e>体</span><span style=color:#75715e>属</span><span style=color:#75715e>性</span><span style=color:#75715e>的</span><span style=color:#75715e>子</span><span style=color:#75715e>属</span><span style=color:#75715e>性</span><span style=color:#75715e>，</span><span style=color:#75715e>O</span><span style=color:#75715e>b</span><span style=color:#75715e>j</span><span style=color:#75715e>e</span><span style=color:#75715e>c</span><span style=color:#75715e>t</span><span style=color:#75715e>i</span><span style=color:#75715e>v</span><span style=color:#75715e>e</span><span style=color:#75715e>-</span><span style=color:#75715e>C</span><span style=color:#75715e> </span><span style=color:#75715e>不</span><span style=color:#75715e>可</span><span style=color:#75715e>以</span><span style=color:#75715e>（</span><span style=color:#75715e>例</span><span style=color:#75715e>:</span><span style=color:#75715e>s</span><span style=color:#75715e>e</span><span style=color:#75715e>l</span><span style=color:#75715e>f</span><span style=color:#75715e>.</span><span style=color:#75715e>f</span><span style=color:#75715e>r</span><span style=color:#75715e>a</span><span style=color:#75715e>m</span><span style=color:#75715e>e</span><span style=color:#75715e>.</span><span style=color:#75715e>s</span><span style=color:#75715e>i</span><span style=color:#75715e>z</span><span style=color:#75715e>e</span><span style=color:#75715e>.</span><span style=color:#75715e>w</span><span style=color:#75715e>i</span><span style=color:#75715e>d</span><span style=color:#75715e>t</span><span style=color:#75715e>h</span><span style=color:#75715e> </span><span style=color:#75715e>=</span><span style=color:#75715e> </span><span style=color:#75715e>1</span><span style=color:#75715e>0</span><span style=color:#75715e>）</span>
print(range.location)

range.moveBy(<span style=color:#ae81ff>1</span>)
print(range.location)
</code></pre></div><p>存储属性可存储常量或变量作为实例的一部分，只能用于类和结构体。计算属性提供一个 getter 和一个可选的 setter，来间接获取和设置其他属性或变量的值，计算属性可以用于类、结构体和枚举。</p><p>可以通过重写属性的方式为继承的属性添加属性观察器，但不包括常量存储型属性和只读计算型属性。父类的属性在子类的构造器中被赋值时，父类会先响应。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=color:#66d9ef>struct</span> <span style=color:#a6e22e>Point</span> {
    <span style=color:#66d9ef>var</span> x = <span style=color:#ae81ff>0.0</span> { <span style=color:#75715e>//</span><span style=color:#75715e> </span><span style=color:#75715e>直</span><span style=color:#75715e>接</span><span style=color:#75715e>赋</span><span style=color:#75715e>值</span><span style=color:#75715e>或</span><span style=color:#75715e>通</span><span style=color:#75715e>过</span><span style=color:#75715e>构</span><span style=color:#75715e>造</span><span style=color:#75715e>器</span><span style=color:#75715e>赋</span><span style=color:#75715e>值</span><span style=color:#75715e>时</span><span style=color:#75715e>不</span><span style=color:#75715e>会</span><span style=color:#75715e>触</span><span style=color:#75715e>发</span><span style=color:#75715e> </span><span style=color:#75715e>K</span><span style=color:#75715e>V</span><span style=color:#75715e>O</span><span style=color:#75715e>，</span><span style=color:#75715e>弱</span><span style=color:#75715e>引</span><span style=color:#75715e>用</span><span style=color:#75715e>对</span><span style=color:#75715e>象</span><span style=color:#75715e>变</span><span style=color:#75715e>成</span><span style=color:#75715e> </span><span style=color:#75715e>n</span><span style=color:#75715e>i</span><span style=color:#75715e>l</span><span style=color:#75715e> </span><span style=color:#75715e>时</span><span style=color:#75715e>也</span><span style=color:#75715e>不</span><span style=color:#75715e>会</span><span style=color:#75715e>触</span><span style=color:#75715e>发</span><span style=color:#75715e> </span><span style=color:#75715e>K</span><span style=color:#75715e>V</span><span style=color:#75715e>O</span><span style=color:#75715e>，</span><span style=color:#75715e>并</span><span style=color:#75715e>且</span><span style=color:#75715e>不</span><span style=color:#75715e>能</span><span style=color:#75715e>对</span><span style=color:#75715e>延</span><span style=color:#75715e>迟</span><span style=color:#75715e>存</span><span style=color:#75715e>储</span><span style=color:#75715e>做</span><span style=color:#75715e> </span><span style=color:#75715e>K</span><span style=color:#75715e>V</span><span style=color:#75715e>O</span>
        <span style=color:#66d9ef>willSet</span> {
            print(newValue)
        }
        <span style=color:#66d9ef>didSet</span> {
            print(oldValue)
        }
    }
    <span style=color:#66d9ef>var</span> y = <span style=color:#ae81ff>0.0</span>
}
<span style=color:#66d9ef>struct</span> <span style=color:#a6e22e>Size</span> {
    <span style=color:#66d9ef>var</span> width = <span style=color:#ae81ff>0.0</span>, height = <span style=color:#ae81ff>0.0</span>
}
<span style=color:#66d9ef>struct</span> <span style=color:#a6e22e>Rect</span> {
    <span style=color:#66d9ef>var</span> origin = Point()
    <span style=color:#66d9ef>var</span> size = Size()
    <span style=color:#66d9ef>var</span> center: Point { <span style=color:#75715e>//</span><span style=color:#75715e> </span><span style=color:#75715e>必</span><span style=color:#75715e>须</span><span style=color:#75715e>用</span><span style=color:#75715e> </span><span style=color:#75715e>v</span><span style=color:#75715e>a</span><span style=color:#75715e>r</span><span style=color:#75715e> </span><span style=color:#75715e>定</span><span style=color:#75715e>义</span><span style=color:#75715e>，</span><span style=color:#75715e>因</span><span style=color:#75715e>为</span><span style=color:#75715e>值</span><span style=color:#75715e>不</span><span style=color:#75715e>是</span><span style=color:#75715e>固</span><span style=color:#75715e>定</span><span style=color:#75715e>的</span>
        <span style=color:#66d9ef>get</span> {
            <span style=color:#66d9ef>let</span> centerX = origin.x <span style=color:#f92672>+</span> (size.width <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>)
            <span style=color:#66d9ef>let</span> centerY = origin.y <span style=color:#f92672>+</span> (size.height <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>)
            <span style=color:#66d9ef>return</span> Point(x: centerX, y: centerY)
        }
        <span style=color:#66d9ef>set</span>(newCenter) { <span style=color:#75715e>//</span><span style=color:#75715e> </span><span style=color:#75715e>如</span><span style=color:#75715e>果</span><span style=color:#75715e>计</span><span style=color:#75715e>算</span><span style=color:#75715e>属</span><span style=color:#75715e>性</span><span style=color:#75715e>的</span><span style=color:#75715e> </span><span style=color:#75715e>s</span><span style=color:#75715e>e</span><span style=color:#75715e>t</span><span style=color:#75715e>t</span><span style=color:#75715e>e</span><span style=color:#75715e>r</span><span style=color:#75715e> </span><span style=color:#75715e>没</span><span style=color:#75715e>有</span><span style=color:#75715e>定</span><span style=color:#75715e>义</span><span style=color:#75715e>表</span><span style=color:#75715e>示</span><span style=color:#75715e>新</span><span style=color:#75715e>值</span><span style=color:#75715e>的</span><span style=color:#75715e>参</span><span style=color:#75715e>数</span><span style=color:#75715e>名</span><span style=color:#75715e>，</span><span style=color:#75715e>则</span><span style=color:#75715e>可</span><span style=color:#75715e>以</span><span style=color:#75715e>使</span><span style=color:#75715e>用</span><span style=color:#75715e>默</span><span style=color:#75715e>认</span><span style=color:#75715e>名</span><span style=color:#75715e>称</span><span style=color:#75715e> </span><span style=color:#75715e>n</span><span style=color:#75715e>e</span><span style=color:#75715e>w</span><span style=color:#75715e>V</span><span style=color:#75715e>a</span><span style=color:#75715e>l</span><span style=color:#75715e>u</span><span style=color:#75715e>e</span>
            origin.x = newCenter.x <span style=color:#f92672>-</span> (size.width <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>)
            origin.y = newCenter.y <span style=color:#f92672>-</span> (size.height <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>)
        }
    }
    <span style=color:#75715e>//</span><span style=color:#75715e> </span><span style=color:#75715e>只</span><span style=color:#75715e>读</span><span style=color:#75715e>计</span><span style=color:#75715e>算</span><span style=color:#75715e>属</span><span style=color:#75715e>性</span><span style=color:#75715e>，</span><span style=color:#75715e>只</span><span style=color:#75715e>有</span><span style=color:#75715e> </span><span style=color:#75715e>g</span><span style=color:#75715e>e</span><span style=color:#75715e>t</span><span style=color:#75715e>，</span><span style=color:#75715e>并</span><span style=color:#75715e>且</span><span style=color:#75715e>可</span><span style=color:#75715e>以</span><span style=color:#75715e>去</span><span style=color:#75715e>掉</span><span style=color:#75715e> </span><span style=color:#75715e>g</span><span style=color:#75715e>e</span><span style=color:#75715e>t</span><span style=color:#75715e> </span><span style=color:#75715e>关</span><span style=color:#75715e>键</span><span style=color:#75715e>字</span>
    <span style=color:#66d9ef>var</span> width: Double {
        <span style=color:#66d9ef>return</span> size.width
    }
}
<span style=color:#66d9ef>var</span> frame = Rect(origin: Point(x: <span style=color:#ae81ff>2</span>, y: <span style=color:#ae81ff>2</span>), size: Size(width: <span style=color:#ae81ff>10</span>, height: <span style=color:#ae81ff>10</span>))
frame.center = Point(x: <span style=color:#ae81ff>1</span>, y: <span style=color:#ae81ff>3</span>)
</code></pre></div><p>在 Objective-C 中，与类关联的静态常量或静态变量是全局的，但在 Swift 中，它的作用范围就在类型支持的范围内。</p><p>下标可以定义在类、结构体和枚举中，是访问集合，列表或序列中元素的快捷方式。一个类型可以定义多个下标，并通过不同索引类型进行重载。下标不限于一维，可以定义具有多个入参的下标满足自定义类型的需求。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=color:#66d9ef>struct</span> <span style=color:#a6e22e>Tyre</span> {
    <span style=color:#66d9ef>let</span> row: Int, column: Int
}

<span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Car</span> {
    <span style=color:#66d9ef>var</span> tyre = [Tyre(row: <span style=color:#ae81ff>0</span>, column: <span style=color:#ae81ff>0</span>), Tyre(row: <span style=color:#ae81ff>0</span>, column: <span style=color:#ae81ff>1</span>), Tyre(row: <span style=color:#ae81ff>1</span>, column: <span style=color:#ae81ff>0</span>), Tyre(row: <span style=color:#ae81ff>1</span>, column: <span style=color:#ae81ff>1</span>)]
    
    <span style=color:#66d9ef>lazy</span> <span style=color:#66d9ef>var</span> allComponentNames = Car.getAllComponentName() <span style=color:#75715e>//</span><span style=color:#75715e> </span><span style=color:#75715e>必</span><span style=color:#75715e>须</span><span style=color:#75715e>将</span><span style=color:#75715e>延</span><span style=color:#75715e>迟</span><span style=color:#75715e>存</span><span style=color:#75715e>储</span><span style=color:#75715e>属</span><span style=color:#75715e>性</span><span style=color:#75715e>声</span><span style=color:#75715e>明</span><span style=color:#75715e>成</span><span style=color:#75715e>变</span><span style=color:#75715e>量</span><span style=color:#75715e>，</span><span style=color:#75715e>因</span><span style=color:#75715e>为</span><span style=color:#75715e>属</span><span style=color:#75715e>性</span><span style=color:#75715e>的</span><span style=color:#75715e>初</span><span style=color:#75715e>始</span><span style=color:#75715e>值</span><span style=color:#75715e>可</span><span style=color:#75715e>能</span><span style=color:#75715e>在</span><span style=color:#75715e>实</span><span style=color:#75715e>例</span><span style=color:#75715e>构</span><span style=color:#75715e>造</span><span style=color:#75715e>完</span><span style=color:#75715e>成</span><span style=color:#75715e>之</span><span style=color:#75715e>后</span><span style=color:#75715e>才</span><span style=color:#75715e>会</span><span style=color:#75715e>得</span><span style=color:#75715e>到</span><span style=color:#75715e>，</span><span style=color:#75715e>全</span><span style=color:#75715e>局</span><span style=color:#75715e>的</span><span style=color:#75715e>常</span><span style=color:#75715e>量</span><span style=color:#75715e>或</span><span style=color:#75715e>变</span><span style=color:#75715e>量</span><span style=color:#75715e>都</span><span style=color:#75715e>是</span><span style=color:#75715e>延</span><span style=color:#75715e>迟</span><span style=color:#75715e>计</span><span style=color:#75715e>算</span><span style=color:#75715e>的</span><span style=color:#75715e>。</span>
    
    <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>var</span> description = <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>Car</span><span style=color:#e6db74>&#34;</span> <span style=color:#75715e>//</span><span style=color:#75715e> </span><span style=color:#75715e>类</span><span style=color:#75715e>属</span><span style=color:#75715e>性</span><span style=color:#75715e>无</span><span style=color:#75715e>法</span><span style=color:#75715e>被</span><span style=color:#75715e>子</span><span style=color:#75715e>类</span><span style=color:#75715e>重</span><span style=color:#75715e>写</span><span style=color:#75715e>，</span><span style=color:#75715e>c</span><span style=color:#75715e>l</span><span style=color:#75715e>a</span><span style=color:#75715e>s</span><span style=color:#75715e>s</span><span style=color:#75715e> </span><span style=color:#75715e>修</span><span style=color:#75715e>饰</span><span style=color:#75715e>的</span><span style=color:#75715e>属</span><span style=color:#75715e>性</span><span style=color:#75715e>可</span><span style=color:#75715e>以</span><span style=color:#75715e>被</span><span style=color:#75715e>子</span><span style=color:#75715e>类</span><span style=color:#75715e>重</span><span style=color:#75715e>写</span><span style=color:#75715e>，</span><span style=color:#75715e>但</span><span style=color:#75715e>是</span><span style=color:#75715e>只</span><span style=color:#75715e>能</span><span style=color:#75715e>用</span><span style=color:#75715e>来</span><span style=color:#75715e>修</span><span style=color:#75715e>饰</span><span style=color:#75715e>计</span><span style=color:#75715e>算</span><span style=color:#75715e>属</span><span style=color:#75715e>性</span><span style=color:#75715e>。</span>
    <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>func</span> <span style=color:#a6e22e>getAllComponentName</span>() -&gt; [String] { <span style=color:#66d9ef>return</span> [] } <span style=color:#75715e>//</span><span style=color:#75715e> </span><span style=color:#75715e>s</span><span style=color:#75715e>t</span><span style=color:#75715e>a</span><span style=color:#75715e>t</span><span style=color:#75715e>i</span><span style=color:#75715e>c</span><span style=color:#75715e> </span><span style=color:#75715e>换</span><span style=color:#75715e>成</span><span style=color:#75715e> </span><span style=color:#75715e>c</span><span style=color:#75715e>l</span><span style=color:#75715e>a</span><span style=color:#75715e>s</span><span style=color:#75715e>s</span><span style=color:#75715e> </span><span style=color:#75715e>则</span><span style=color:#75715e>子</span><span style=color:#75715e>类</span><span style=color:#75715e>可</span><span style=color:#75715e>以</span><span style=color:#75715e>重</span><span style=color:#75715e>写</span><span style=color:#75715e>该</span><span style=color:#75715e>方</span><span style=color:#75715e>法</span>
    
    <span style=color:#66d9ef>subscript</span>(row: Int, column: Int) -&gt; Tyre { <span style=color:#75715e>//</span><span style=color:#75715e> </span><span style=color:#75715e>c</span><span style=color:#75715e>a</span><span style=color:#75715e>r</span><span style=color:#75715e>[</span><span style=color:#75715e>0</span><span style=color:#75715e>,</span><span style=color:#75715e> </span><span style=color:#75715e>1</span><span style=color:#75715e>]</span>
        <span style=color:#66d9ef>get</span> {
            <span style=color:#66d9ef>return</span> tyre[(row <span style=color:#f92672>*</span> column) <span style=color:#f92672>+</span> column]
        }
        <span style=color:#66d9ef>set</span> {
            tyre[(row <span style=color:#f92672>*</span> column) <span style=color:#f92672>+</span> column] = newValue
        }
    }
}

<span style=color:#66d9ef>let</span> car = Car()
print(car.tyre[<span style=color:#ae81ff>1</span>])

car.tyre[<span style=color:#ae81ff>1</span>] = Tyre(row: <span style=color:#ae81ff>100</span>, column: <span style=color:#ae81ff>100</span>)
print(car.tyre[<span style=color:#ae81ff>1</span>])
</code></pre></div><p>类和结构体在创建实例时，必须为所有存储型属性设置合适的初始值。如果结构体或类的所有属性都有默认值，同时没有自定义的构造器，那么 Swift 会提供一个默认构造器。与 Objective-C 中的构造器不同，Swift 的构造器无需返回值。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>User</span> {
    <span style=color:#66d9ef>var</span> name: String?
    <span style=color:#66d9ef>var</span> age = <span style=color:#ae81ff>10</span>
}
<span style=color:#66d9ef>var</span> item = User()
</code></pre></div><p>可以将继承来的只读属性通过提供 getter/setter 重写为一个读写属性，但是不可以将继承来的读写属性重写为一个只读属性。</p><p>如果为值类型定义了构造器，将无法访问到他的默认构造器。这种限制可以防止你为值类型增加了一个额外的且十分复杂的构造器之后，仍然有人错误的使用自动生成的构造器，如果希望他们能同时使用，可以将自定义的构造器写到扩展中。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=color:#75715e>//</span><span style=color:#75715e> </span><span style=color:#75715e>S</span><span style=color:#75715e>w</span><span style=color:#75715e>i</span><span style=color:#75715e>f</span><span style=color:#75715e>t</span><span style=color:#75715e> </span><span style=color:#75715e>中</span><span style=color:#75715e>的</span><span style=color:#75715e>类</span><span style=color:#75715e>没</span><span style=color:#75715e>有</span><span style=color:#75715e>通</span><span style=color:#75715e>用</span><span style=color:#75715e>基</span><span style=color:#75715e>类</span>
<span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Person</span> {
    <span style=color:#66d9ef>var</span> name: String
    <span style=color:#66d9ef>var</span> age: Int = <span style=color:#ae81ff>0</span>
    <span style=color:#66d9ef>var</span> gender = <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>male</span><span style=color:#e6db74>&#34;</span> <span style=color:#75715e>//</span><span style=color:#75715e> </span><span style=color:#75715e>尽</span><span style=color:#75715e>量</span><span style=color:#75715e>为</span><span style=color:#75715e>属</span><span style=color:#75715e>性</span><span style=color:#75715e>设</span><span style=color:#75715e>置</span><span style=color:#75715e>默</span><span style=color:#75715e>认</span><span style=color:#75715e>值</span><span style=color:#75715e>，</span><span style=color:#75715e>不</span><span style=color:#75715e>仅</span><span style=color:#75715e>代</span><span style=color:#75715e>码</span><span style=color:#75715e>可</span><span style=color:#75715e>读</span><span style=color:#75715e>性</span><span style=color:#75715e>好</span><span style=color:#75715e>，</span><span style=color:#75715e>还</span><span style=color:#75715e>可</span><span style=color:#75715e>以</span><span style=color:#75715e>在</span><span style=color:#75715e>属</span><span style=color:#75715e>性</span><span style=color:#75715e>很</span><span style=color:#75715e>多</span><span style=color:#75715e>时</span><span style=color:#75715e>减</span><span style=color:#75715e>少</span><span style=color:#75715e>构</span><span style=color:#75715e>造</span><span style=color:#75715e>器</span><span style=color:#75715e>参</span><span style=color:#75715e>数</span><span style=color:#75715e>的</span><span style=color:#75715e>个</span><span style=color:#75715e>数</span>
    
    <span style=color:#66d9ef>init</span>(name: String) { <span style=color:#66d9ef>self</span>.name = name }
    
    <span style=color:#66d9ef>func</span> <span style=color:#a6e22e>sayHello</span>() { print(<span style=color:#e6db74>&#34;</span><span style=color:#e6db74>person: hello!</span><span style=color:#e6db74>&#34;</span>) }
    
    <span style=color:#66d9ef>deinit</span> { <span style=color:#75715e>//</span><span style=color:#75715e> </span><span style=color:#75715e>析</span><span style=color:#75715e>构</span><span style=color:#75715e>器</span><span style=color:#75715e>只</span><span style=color:#75715e>适</span><span style=color:#75715e>用</span><span style=color:#75715e>于</span><span style=color:#75715e>类</span><span style=color:#75715e>类</span><span style=color:#75715e>型</span><span style=color:#75715e>，</span><span style=color:#75715e>用</span><span style=color:#75715e>法</span><span style=color:#75715e>与</span><span style=color:#75715e> </span><span style=color:#75715e>A</span><span style=color:#75715e>R</span><span style=color:#75715e>C</span><span style=color:#75715e> </span><span style=color:#75715e>下</span><span style=color:#75715e>的</span><span style=color:#75715e> </span><span style=color:#75715e>d</span><span style=color:#75715e>e</span><span style=color:#75715e>a</span><span style=color:#75715e>l</span><span style=color:#75715e>l</span><span style=color:#75715e>o</span><span style=color:#75715e>c</span><span style=color:#75715e>(</span><span style=color:#75715e>)</span><span style=color:#75715e> </span><span style=color:#75715e>一</span><span style=color:#75715e>样</span><span style=color:#75715e> </span><span style=color:#75715e>}</span>
    }
}

<span style=color:#75715e>//</span><span style=color:#75715e> </span><span style=color:#75715e>用</span><span style=color:#75715e> </span><span style=color:#75715e>f</span><span style=color:#75715e>i</span><span style=color:#75715e>n</span><span style=color:#75715e>a</span><span style=color:#75715e>l</span><span style=color:#75715e> </span><span style=color:#75715e>修</span><span style=color:#75715e>饰</span><span style=color:#75715e>的</span><span style=color:#75715e>类</span><span style=color:#75715e>不</span><span style=color:#75715e>能</span><span style=color:#75715e>被</span><span style=color:#75715e>继</span><span style=color:#75715e>承</span><span style=color:#75715e>，</span><span style=color:#75715e>用</span><span style=color:#75715e> </span><span style=color:#75715e>f</span><span style=color:#75715e>i</span><span style=color:#75715e>n</span><span style=color:#75715e>a</span><span style=color:#75715e>l</span><span style=color:#75715e> </span><span style=color:#75715e>修</span><span style=color:#75715e>饰</span><span style=color:#75715e>方</span><span style=color:#75715e>法</span><span style=color:#75715e>、</span><span style=color:#75715e>属</span><span style=color:#75715e>性</span><span style=color:#75715e>、</span><span style=color:#75715e>下</span><span style=color:#75715e>标</span><span style=color:#75715e>，</span><span style=color:#75715e>则</span><span style=color:#75715e>它</span><span style=color:#75715e>们</span><span style=color:#75715e>不</span><span style=color:#75715e>能</span><span style=color:#75715e>被</span><span style=color:#75715e>重</span><span style=color:#75715e>写</span><span style=color:#75715e>。</span>
<span style=color:#66d9ef>final</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Employee</span>: Person {
    <span style=color:#66d9ef>var</span> company: String
    <span style=color:#66d9ef>var</span> position: String
    
    <span style=color:#75715e>//</span><span style=color:#75715e> </span><span style=color:#75715e>重</span><span style=color:#75715e>写</span><span style=color:#75715e>父</span><span style=color:#75715e>类</span><span style=color:#75715e>的</span><span style=color:#75715e>指</span><span style=color:#75715e>定</span><span style=color:#75715e>构</span><span style=color:#75715e>造</span><span style=color:#75715e>器</span>
    <span style=color:#66d9ef>override</span> <span style=color:#66d9ef>init</span>(name: String) {
        <span style=color:#66d9ef>self</span>.company = <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>&#34;</span>
        <span style=color:#66d9ef>self</span>.position = <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>&#34;</span>
        
        <span style=color:#66d9ef>super</span>.<span style=color:#66d9ef>init</span>(name: name)
    }
    
    <span style=color:#75715e>//</span><span style=color:#75715e> </span><span style=color:#75715e>指</span><span style=color:#75715e>定</span><span style=color:#75715e>构</span><span style=color:#75715e>造</span><span style=color:#75715e>器</span><span style=color:#75715e>将</span><span style=color:#75715e>初</span><span style=color:#75715e>始</span><span style=color:#75715e>化</span><span style=color:#75715e>类</span><span style=color:#75715e>中</span><span style=color:#75715e>提</span><span style=color:#75715e>供</span><span style=color:#75715e>的</span><span style=color:#75715e>所</span><span style=color:#75715e>有</span><span style=color:#75715e>属</span><span style=color:#75715e>性</span><span style=color:#75715e>，</span><span style=color:#75715e>并</span><span style=color:#75715e>必</span><span style=color:#75715e>须</span><span style=color:#75715e>调</span><span style=color:#75715e>用</span><span style=color:#75715e>其</span><span style=color:#75715e>直</span><span style=color:#75715e>接</span><span style=color:#75715e>父</span><span style=color:#75715e>类</span><span style=color:#75715e>的</span><span style=color:#75715e>的</span><span style=color:#75715e>指</span><span style=color:#75715e>定</span><span style=color:#75715e>构</span><span style=color:#75715e>造</span><span style=color:#75715e>器</span><span style=color:#75715e>来</span><span style=color:#75715e>实</span><span style=color:#75715e>现</span><span style=color:#75715e>父</span><span style=color:#75715e>类</span><span style=color:#75715e>的</span><span style=color:#75715e>初</span><span style=color:#75715e>始</span><span style=color:#75715e>化</span><span style=color:#75715e>。</span><span style=color:#75715e>每</span><span style=color:#75715e>一</span><span style=color:#75715e>个</span><span style=color:#75715e>类</span><span style=color:#75715e>都</span><span style=color:#75715e>必</span><span style=color:#75715e>须</span><span style=color:#75715e>拥</span><span style=color:#75715e>有</span><span style=color:#75715e>至</span><span style=color:#75715e>少</span><span style=color:#75715e>一</span><span style=color:#75715e>个</span><span style=color:#75715e>指</span><span style=color:#75715e>定</span><span style=color:#75715e>构</span><span style=color:#75715e>造</span><span style=color:#75715e>器</span><span style=color:#75715e>。</span>
    <span style=color:#66d9ef>init</span>(company: String, position: String) {
        <span style=color:#66d9ef>self</span>.company = company
        <span style=color:#66d9ef>self</span>.position = position
        
        <span style=color:#66d9ef>super</span>.<span style=color:#66d9ef>init</span>(name: <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>&#34;</span>)
    }
    
    <span style=color:#75715e>//</span><span style=color:#75715e> </span><span style=color:#75715e>当</span><span style=color:#75715e>参</span><span style=color:#75715e>数</span><span style=color:#75715e>很</span><span style=color:#75715e>多</span><span style=color:#75715e>时</span><span style=color:#75715e>可</span><span style=color:#75715e>用</span><span style=color:#75715e>便</span><span style=color:#75715e>利</span><span style=color:#75715e>构</span><span style=color:#75715e>造</span><span style=color:#75715e>器</span><span style=color:#75715e>辅</span><span style=color:#75715e>助</span><span style=color:#75715e>指</span><span style=color:#75715e>定</span><span style=color:#75715e>构</span><span style=color:#75715e>造</span><span style=color:#75715e>器</span><span style=color:#75715e>初</span><span style=color:#75715e>始</span><span style=color:#75715e>化</span><span style=color:#75715e>对</span><span style=color:#75715e>象</span><span style=color:#75715e>，</span><span style=color:#75715e>它</span><span style=color:#75715e>必</span><span style=color:#75715e>须</span><span style=color:#75715e>调</span><span style=color:#75715e>用</span><span style=color:#75715e>同</span><span style=color:#75715e>类</span><span style=color:#75715e>中</span><span style=color:#75715e>的</span><span style=color:#75715e>其</span><span style=color:#75715e>它</span><span style=color:#75715e>构</span><span style=color:#75715e>造</span><span style=color:#75715e>器</span><span style=color:#75715e>，</span><span style=color:#75715e>并</span><span style=color:#75715e>必</span><span style=color:#75715e>须</span><span style=color:#75715e>最</span><span style=color:#75715e>终</span><span style=color:#75715e>导</span><span style=color:#75715e>致</span><span style=color:#75715e>一</span><span style=color:#75715e>个</span><span style=color:#75715e>指</span><span style=color:#75715e>定</span><span style=color:#75715e>构</span><span style=color:#75715e>造</span><span style=color:#75715e>器</span><span style=color:#75715e>被</span><span style=color:#75715e>调</span><span style=color:#75715e>用</span>
    <span style=color:#66d9ef>convenience</span> <span style=color:#66d9ef>init</span>(company: String) {
        <span style=color:#66d9ef>self</span>.<span style=color:#66d9ef>init</span>(company: company, position: <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>&#34;</span>)
    }
    
    <span style=color:#75715e>//</span><span style=color:#75715e> </span><span style=color:#75715e>缺</span><span style=color:#75715e>少</span><span style=color:#75715e> </span><span style=color:#75715e>o</span><span style=color:#75715e>v</span><span style=color:#75715e>e</span><span style=color:#75715e>r</span><span style=color:#75715e>r</span><span style=color:#75715e>i</span><span style=color:#75715e>d</span><span style=color:#75715e>e</span><span style=color:#75715e> </span><span style=color:#75715e>的</span><span style=color:#75715e>重</span><span style=color:#75715e>写</span><span style=color:#75715e>会</span><span style=color:#75715e>在</span><span style=color:#75715e>编</span><span style=color:#75715e>译</span><span style=color:#75715e>时</span><span style=color:#75715e>报</span><span style=color:#75715e>错</span><span style=color:#75715e>，</span><span style=color:#75715e>这</span><span style=color:#75715e>样</span><span style=color:#75715e>可</span><span style=color:#75715e>以</span><span style=color:#75715e>避</span><span style=color:#75715e>免</span><span style=color:#75715e>意</span><span style=color:#75715e>外</span><span style=color:#75715e>重</span><span style=color:#75715e>写</span><span style=color:#75715e>。</span>
    <span style=color:#66d9ef>override</span> <span style=color:#66d9ef>func</span> <span style=color:#a6e22e>sayHello</span>() {
        <span style=color:#66d9ef>super</span>.sayHello()
        
        print(<span style=color:#e6db74>&#34;</span><span style=color:#e6db74>employee: hello!</span><span style=color:#e6db74>&#34;</span>)
    }
}
<span style=color:#66d9ef>var</span> item2 = Employee(name: <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>xx</span><span style=color:#e6db74>&#34;</span>)
</code></pre></div><p>可以用非可失败构造器重写可失败构造器，但反过来不行。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=color:#66d9ef>struct</span> <span style=color:#a6e22e>Animal</span> {
    <span style=color:#66d9ef>let</span> species: String
    
    <span style=color:#75715e>//</span><span style=color:#75715e> </span><span style=color:#75715e>i</span><span style=color:#75715e>n</span><span style=color:#75715e>i</span><span style=color:#75715e>t</span><span style=color:#75715e>?</span><span style=color:#75715e> </span><span style=color:#75715e>表</span><span style=color:#75715e>示</span><span style=color:#75715e>可</span><span style=color:#75715e>能</span><span style=color:#75715e>会</span><span style=color:#75715e>构</span><span style=color:#75715e>造</span><span style=color:#75715e>失</span><span style=color:#75715e>败</span><span style=color:#75715e>返</span><span style=color:#75715e>回</span><span style=color:#75715e> </span><span style=color:#75715e>n</span><span style=color:#75715e>i</span><span style=color:#75715e>l</span>
    <span style=color:#66d9ef>init</span>?(species: String) {
        <span style=color:#66d9ef>if</span> species.isEmpty {
            <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>nil</span> <span style=color:#75715e>//</span><span style=color:#75715e> </span><span style=color:#75715e>通</span><span style=color:#75715e>常</span><span style=color:#75715e>构</span><span style=color:#75715e>造</span><span style=color:#75715e>函</span><span style=color:#75715e>数</span><span style=color:#75715e>不</span><span style=color:#75715e>用</span><span style=color:#75715e> </span><span style=color:#75715e>r</span><span style=color:#75715e>e</span><span style=color:#75715e>t</span><span style=color:#75715e>u</span><span style=color:#75715e>r</span><span style=color:#75715e>n</span><span style=color:#75715e>，</span><span style=color:#75715e>唯</span><span style=color:#75715e>一</span><span style=color:#75715e>用</span><span style=color:#75715e>到</span><span style=color:#75715e>的</span><span style=color:#75715e>情</span><span style=color:#75715e>景</span><span style=color:#75715e>就</span><span style=color:#75715e>是</span><span style=color:#75715e>表</span><span style=color:#75715e>示</span><span style=color:#75715e>构</span><span style=color:#75715e>造</span><span style=color:#75715e>失</span><span style=color:#75715e>败</span>
        }
        <span style=color:#66d9ef>self</span>.species = species
    }
}

<span style=color:#66d9ef>let</span> someCreature = Animal(species: <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>Giraffe</span><span style=color:#e6db74>&#34;</span>) <span style=color:#75715e>//</span><span style=color:#75715e> </span><span style=color:#75715e>s</span><span style=color:#75715e>o</span><span style=color:#75715e>m</span><span style=color:#75715e>e</span><span style=color:#75715e>C</span><span style=color:#75715e>r</span><span style=color:#75715e>e</span><span style=color:#75715e>a</span><span style=color:#75715e>t</span><span style=color:#75715e>u</span><span style=color:#75715e>r</span><span style=color:#75715e>e</span><span style=color:#75715e> </span><span style=color:#75715e>的</span><span style=color:#75715e>类</span><span style=color:#75715e>型</span><span style=color:#75715e>是</span><span style=color:#75715e> </span><span style=color:#75715e>A</span><span style=color:#75715e>n</span><span style=color:#75715e>i</span><span style=color:#75715e>m</span><span style=color:#75715e>a</span><span style=color:#75715e>l</span><span style=color:#75715e>?</span><span style=color:#75715e> </span><span style=color:#75715e>而</span><span style=color:#75715e>不</span><span style=color:#75715e>是</span><span style=color:#75715e> </span><span style=color:#75715e>A</span><span style=color:#75715e>n</span><span style=color:#75715e>i</span><span style=color:#75715e>m</span><span style=color:#75715e>a</span><span style=color:#75715e>l</span>

<span style=color:#66d9ef>if</span> <span style=color:#66d9ef>let</span> giraffe = someCreature {
    print(<span style=color:#e6db74>&#34;</span><span style=color:#e6db74>An animal was initialized with a species of </span><span style=color:#e6db74>\(</span>giraffe.species<span style=color:#e6db74>)</span><span style=color:#e6db74>&#34;</span>)
}
</code></pre></div><p>在类的构造器前添加 required 修饰符表明所有该类的子类都必须实现该构造器</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>SomeClass5</span> {
    <span style=color:#66d9ef>required</span> <span style=color:#66d9ef>init</span>() {}
}

<span style=color:#66d9ef>class</span> <span style=color:#a6e22e>SomeSubclass</span>: SomeClass5 {
    <span style=color:#66d9ef>required</span> <span style=color:#66d9ef>init</span>() {} <span style=color:#75715e>//</span><span style=color:#75715e> </span><span style=color:#75715e>必</span><span style=color:#75715e>须</span><span style=color:#75715e>也</span><span style=color:#75715e>用</span><span style=color:#75715e> </span><span style=color:#75715e>r</span><span style=color:#75715e>e</span><span style=color:#75715e>q</span><span style=color:#75715e>u</span><span style=color:#75715e>i</span><span style=color:#75715e>r</span><span style=color:#75715e>e</span><span style=color:#75715e>d</span><span style=color:#75715e> </span><span style=color:#75715e>应</span><span style=color:#75715e>用</span><span style=color:#75715e>于</span><span style=color:#75715e>继</span><span style=color:#75715e>承</span><span style=color:#75715e>链</span><span style=color:#75715e>后</span><span style=color:#75715e>面</span><span style=color:#75715e>的</span><span style=color:#75715e>子</span><span style=color:#75715e>类</span>
}
</code></pre></div><h3 id=heading-25>访问控制</h3><p>Swift 中的访问控制模型基于模块和源文件这两个概念，并为代码中的实体提供了五种不同的访问级别。</p><ul><li><p>open：可以被任何模块访问、继承和重写。</p></li><li><p>public：可以被任何模块访问，但只能被所定义模块中的类继承和重写。</p></li><li><p>internal(默认)：只能被所定义的模块内部访问。</p></li><li><p>fileprivate：只能被所定义的文件内部访问。</p></li><li><p>private：只能在所定义的作用域内使用。</p></li></ul><p>类的访问级别会影响到类成员的默认访问级别，不可以在某个实体中定义访问级别更低的东西。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>var</span> xx: SomePrivateClass? <span style=color:#75715e>//</span><span style=color:#75715e> </span><span style=color:#75715e>x</span><span style=color:#75715e>x</span><span style=color:#75715e> </span><span style=color:#75715e>虽</span><span style=color:#75715e>然</span><span style=color:#75715e>可</span><span style=color:#75715e>以</span><span style=color:#75715e>被</span><span style=color:#75715e>外</span><span style=color:#75715e>界</span><span style=color:#75715e>访</span><span style=color:#75715e>问</span><span style=color:#75715e>，</span><span style=color:#75715e>但</span><span style=color:#75715e>类</span><span style=color:#75715e>是</span><span style=color:#75715e>私</span><span style=color:#75715e>有</span><span style=color:#75715e>的</span><span style=color:#75715e>，</span><span style=color:#75715e>所</span><span style=color:#75715e>以</span><span style=color:#75715e>没</span><span style=color:#75715e>意</span><span style=color:#75715e>义</span>
</code></pre></div><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=color:#66d9ef>private</span>(<span style=color:#66d9ef>set</span>) <span style=color:#66d9ef>var</span> name: String? <span style=color:#75715e>//</span><span style=color:#75715e> </span><span style=color:#75715e>n</span><span style=color:#75715e>a</span><span style=color:#75715e>m</span><span style=color:#75715e>e</span><span style=color:#75715e> </span><span style=color:#75715e>只</span><span style=color:#75715e>能</span><span style=color:#75715e>被</span><span style=color:#75715e>内</span><span style=color:#75715e>部</span><span style=color:#75715e>修</span><span style=color:#75715e>改</span><span style=color:#75715e>，</span><span style=color:#75715e>但</span><span style=color:#75715e>可</span><span style=color:#75715e>以</span><span style=color:#75715e>被</span><span style=color:#75715e>外</span><span style=color:#75715e>部</span><span style=color:#75715e>访</span><span style=color:#75715e>问</span>
</code></pre></div><p>如果想要在测试 target 中访问模块中所有内部级别的实体，可以在导入模块前使用 @testable，然后修改模块的编译设置项 Build Options -> Enable Testability。</p><h3 id=heading-26>元类型</h3><p>元类型是指类型的类型，类、结构体或枚举类型的元类型是相应的类型名后紧跟 <code>.Type</code>，协议的元类型是该协议名字紧跟 <code>.Protocol</code>。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>AnotherSubClass</span> {
    <span style=color:#66d9ef>let</span> str: String
    <span style=color:#66d9ef>required</span> <span style=color:#66d9ef>init</span>(str: String) {
        <span style=color:#66d9ef>self</span>.str = str
    }
}

<span style=color:#66d9ef>let</span> metatype: AnotherSubClass.<span style=color:#66d9ef>Type</span> = AnotherSubClass.<span style=color:#66d9ef>self</span>
<span style=color:#66d9ef>let</span> anotherInstance = metatype.<span style=color:#66d9ef>init</span>(str: <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>some string</span><span style=color:#e6db74>&#34;</span>) <span style=color:#75715e>//</span><span style=color:#75715e> </span><span style=color:#75715e>用</span><span style=color:#75715e>元</span><span style=color:#75715e>类</span><span style=color:#75715e>型</span><span style=color:#75715e>来</span><span style=color:#75715e> </span><span style=color:#75715e>i</span><span style=color:#75715e>n</span><span style=color:#75715e>i</span><span style=color:#75715e>t</span><span style=color:#75715e> </span><span style=color:#75715e>实</span><span style=color:#75715e>例</span><span style=color:#75715e>，</span><span style=color:#75715e>i</span><span style=color:#75715e>n</span><span style=color:#75715e>i</span><span style=color:#75715e>t</span><span style=color:#75715e> </span><span style=color:#75715e>必</span><span style=color:#75715e>须</span><span style=color:#75715e>是</span><span style=color:#75715e> </span><span style=color:#75715e>r</span><span style=color:#75715e>e</span><span style=color:#75715e>q</span><span style=color:#75715e>u</span><span style=color:#75715e>i</span><span style=color:#75715e>r</span><span style=color:#75715e>e</span><span style=color:#75715e>d</span><span style=color:#75715e> </span><span style=color:#75715e>或</span><span style=color:#75715e>类</span><span style=color:#75715e>是</span><span style=color:#75715e> </span><span style=color:#75715e>f</span><span style=color:#75715e>i</span><span style=color:#75715e>n</span><span style=color:#75715e>a</span><span style=color:#75715e>l</span><span style=color:#75715e> </span><span style=color:#75715e>的</span><span style=color:#75715e>。</span>

print(type(of: anotherInstance)) <span style=color:#75715e>//</span><span style=color:#75715e> </span><span style=color:#75715e>t</span><span style=color:#75715e>y</span><span style=color:#75715e>p</span><span style=color:#75715e>e</span><span style=color:#75715e>(</span><span style=color:#75715e>o</span><span style=color:#75715e>f</span><span style=color:#75715e>:</span><span style=color:#75715e>)</span><span style=color:#75715e> </span><span style=color:#75715e>表</span><span style=color:#75715e>达</span><span style=color:#75715e>式</span><span style=color:#75715e>来</span><span style=color:#75715e>获</span><span style=color:#75715e>取</span><span style=color:#75715e>该</span><span style=color:#75715e>实</span><span style=color:#75715e>例</span><span style=color:#75715e>在</span><span style=color:#75715e>运</span><span style=color:#75715e>行</span><span style=color:#75715e>阶</span><span style=color:#75715e>段</span><span style=color:#75715e>的</span><span style=color:#75715e>类</span><span style=color:#75715e>型</span>
</code></pre></div><h3 id=heading-27>嵌套类型</h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=color:#66d9ef>struct</span> <span style=color:#a6e22e>BlackjackCard</span> {
    <span style=color:#66d9ef>enum</span> <span style=color:#a6e22e>Suit</span> {
        <span style=color:#66d9ef>case</span> Spades = <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>♠</span><span style=color:#e6db74>&#34;</span>, Hearts = <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>♡</span><span style=color:#e6db74>&#34;</span>, Diamonds = <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>♢</span><span style=color:#e6db74>&#34;</span>, Clubs = <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>♣</span><span style=color:#e6db74>&#34;</span>
    }
}
print(BlackjackCard.Suit.Hearts.rawValue)
</code></pre></div><h3 id=heading-28>运算符重载</h3><p>类和结构体可以为现有的运算符提供自定义的实现，这通常被称为运算符重载。只有组合赋值运算符可以被重载，不能对默认的赋值运算符 <code>=</code> 和三目条件运算符 <code>? :</code> 进行重载。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=color:#66d9ef>struct</span> <span style=color:#a6e22e>Vector2D</span> {
    <span style=color:#66d9ef>var</span> x = <span style=color:#ae81ff>0.0</span>, y = <span style=color:#ae81ff>0.0</span>
    
    <span style=color:#75715e>//</span><span style=color:#75715e> </span><span style=color:#75715e>中</span><span style=color:#75715e>缀</span><span style=color:#75715e>运</span><span style=color:#75715e>算</span><span style=color:#75715e>符</span>
    <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>func</span> <span style=color:#f92672>+</span> (<span style=color:#66d9ef>left</span>: Vector2D, <span style=color:#66d9ef>right</span>: Vector2D) -&gt; Vector2D {
        <span style=color:#66d9ef>return</span> Vector2D(x: <span style=color:#66d9ef>left</span>.x <span style=color:#f92672>+</span> <span style=color:#66d9ef>right</span>.x, y: <span style=color:#66d9ef>left</span>.y <span style=color:#f92672>+</span> <span style=color:#66d9ef>right</span>.y)
    }
    
    <span style=color:#75715e>//</span><span style=color:#75715e> </span><span style=color:#75715e>重</span><span style=color:#75715e>载</span><span style=color:#75715e>前</span><span style=color:#75715e>缀</span><span style=color:#75715e>或</span><span style=color:#75715e>后</span><span style=color:#75715e>缀</span><span style=color:#75715e>运</span><span style=color:#75715e>算</span><span style=color:#75715e>符</span><span style=color:#75715e>时</span><span style=color:#75715e>需</span><span style=color:#75715e>要</span><span style=color:#75715e>在</span><span style=color:#75715e> </span><span style=color:#75715e>f</span><span style=color:#75715e>u</span><span style=color:#75715e>n</span><span style=color:#75715e>c</span><span style=color:#75715e> </span><span style=color:#75715e>前</span><span style=color:#75715e>指</span><span style=color:#75715e>定</span><span style=color:#75715e> </span><span style=color:#75715e>p</span><span style=color:#75715e>r</span><span style=color:#75715e>e</span><span style=color:#75715e>f</span><span style=color:#75715e>i</span><span style=color:#75715e>x</span><span style=color:#75715e> </span><span style=color:#75715e>或</span><span style=color:#75715e> </span><span style=color:#75715e>p</span><span style=color:#75715e>o</span><span style=color:#75715e>s</span><span style=color:#75715e>t</span><span style=color:#75715e>f</span><span style=color:#75715e>i</span><span style=color:#75715e>x</span><span style=color:#75715e> </span><span style=color:#75715e>修</span><span style=color:#75715e>饰</span><span style=color:#75715e>符</span>
    <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>prefix</span> <span style=color:#66d9ef>func</span> <span style=color:#f92672>-</span> (vector: Vector2D) -&gt; Vector2D {
        <span style=color:#66d9ef>return</span> Vector2D(x: <span style=color:#f92672>-</span>vector.x, y: <span style=color:#f92672>-</span>vector.y)
    }
}

<span style=color:#66d9ef>let</span> combinedVector = Vector2D(x: <span style=color:#ae81ff>3.0</span>, y: <span style=color:#ae81ff>1.0</span>) <span style=color:#f92672>+</span> Vector2D(x: <span style=color:#ae81ff>2.0</span>, y: <span style=color:#ae81ff>4.0</span>)
<span style=color:#66d9ef>let</span> negativeVector = <span style=color:#f92672>-</span>Vector2D(x: <span style=color:#ae81ff>2.0</span>, y: <span style=color:#ae81ff>4.0</span>)
</code></pre></div><h2 id=heading-29>内存管理</h2><p>Swift 使用 ARC 机制来跟踪和管理内存，并且只针对拥有引用计数的类实例，在 ARC 中有 strong、weak、unnowned 三个关键字，默认为 strong。Swift 可以通过弱引用和无主引用来解决循环引用问题，它们都允许循环引用中的一个实例强引用而另外一个实例不保持强引用。</p><p>当可能造成循环引用的两个实例中的其中一个为可选类型，那么就将这个可能为 nil 的属性声明为弱引用</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=color:#66d9ef>weak</span> <span style=color:#66d9ef>var</span> delegate: XXX?
</code></pre></div><p>当可能造成循环引用的两个实例有着几乎相同的生命周期，并且都不希望值为 nil 时，将有着强制依赖性的那个实例对另一个实例持有无主引用。ARC 无法在实例被销毁后将无主引用设为 nil，所以要小心无主引用实例释放后再次使用它时出现的运行时错误。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=color:#66d9ef>unowned</span> <span style=color:#66d9ef>let</span> timer: Timer
</code></pre></div><p>Swift 提供了闭包捕获列表来解决闭包引起的循环引用。捕获列表定义了闭包体内捕获一个或者多个引用类型的规则，跟解决两个类实例间的循环引用一样。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-objc data-lang=objc><span style=color:#66d9ef>__weak</span> <span style=color:#a6e22e>typeof</span>(self) weakSelf <span style=color:#f92672>=</span> self;

self.block <span style=color:#f92672>=</span> <span style=color:#f92672>^</span>{
    <span style=color:#66d9ef>__strong</span> <span style=color:#66d9ef>typeof</span>(self) strongSelf <span style=color:#f92672>=</span> weakSelf;
    [strongSelf doSomething];
};
</code></pre></div><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=color:#66d9ef>self</span>.closure = { [<span style=color:#66d9ef>weak</span> <span style=color:#66d9ef>self</span>] <span style=color:#66d9ef>in</span> <span style=color:#75715e>//</span><span style=color:#75715e> </span><span style=color:#75715e>用</span><span style=color:#75715e> </span><span style=color:#75715e>w</span><span style=color:#75715e>e</span><span style=color:#75715e>a</span><span style=color:#75715e>k</span><span style=color:#75715e> </span><span style=color:#75715e>而</span><span style=color:#75715e>不</span><span style=color:#75715e>是</span><span style=color:#75715e> </span><span style=color:#75715e>u</span><span style=color:#75715e>n</span><span style=color:#75715e>o</span><span style=color:#75715e>w</span><span style=color:#75715e>n</span><span style=color:#75715e>e</span><span style=color:#75715e>d</span><span style=color:#75715e> </span><span style=color:#75715e>会</span><span style=color:#75715e>更</span><span style=color:#75715e>安</span><span style=color:#75715e>全</span><span style=color:#75715e>些</span>
    <span style=color:#66d9ef>guard</span> <span style=color:#66d9ef>let</span> strongSelf = <span style=color:#66d9ef>self</span> <span style=color:#66d9ef>else</span> { <span style=color:#66d9ef>return</span> } <span style=color:#75715e>//</span><span style=color:#75715e> </span><span style=color:#75715e>像</span><span style=color:#75715e> </span><span style=color:#75715e>O</span><span style=color:#75715e>C</span><span style=color:#75715e> </span><span style=color:#75715e>一</span><span style=color:#75715e>样</span>
    strongSelf.doSomething() <span style=color:#75715e>//</span><span style=color:#75715e> </span><span style=color:#75715e>必</span><span style=color:#75715e>须</span><span style=color:#75715e>用</span><span style=color:#75715e> </span><span style=color:#75715e>s</span><span style=color:#75715e>e</span><span style=color:#75715e>l</span><span style=color:#75715e>f</span><span style=color:#75715e> </span><span style=color:#75715e>引</span><span style=color:#75715e>用</span><span style=color:#75715e>属</span><span style=color:#75715e>性</span><span style=color:#75715e>或</span><span style=color:#75715e>方</span><span style=color:#75715e>法</span>
}
</code></pre></div><h2 id=heading-30>扩展</h2><p>Swift 的扩展没有名字，可以为已有的类、结构体、枚举和协议添加方法、下标、嵌套类型、计算型属性以及确认某个协议，还可以为类添加新的便利构造器，但是不能为类添加新的指定构造器或析构器，也不可以为已有属性添加属性观察器和重写已有功能。如果要添加存储型属性也要像 Objective-C 中的方式去添加。（http://stackoverflow.com/questions/25426780/how-to-have-stored-properties-in-swift-the-same-way-i-had-on-objective-c）</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=color:#66d9ef>extension</span> <span style=color:#a6e22e>Int</span> {
    <span style=color:#66d9ef>mutating</span> <span style=color:#66d9ef>func</span> <span style=color:#a6e22e>square</span>() {
        <span style=color:#66d9ef>self</span> = <span style=color:#66d9ef>self</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>self</span>
    }
}
</code></pre></div><h2 id=heading-31>协议</h2><p>类、结构体或枚举都可以遵循协议，协议里的东西都是 requied 的，但是可以通过协议扩展来提供默认实现，默认实现可以被遵循协议的类型提供的实现所替代。在扩展协议的时候，还可以指定一些限制条件，只有遵循协议的类型满足这些限制条件时，才能获得协议扩展提供的默认实现。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=color:#66d9ef>protocol</span> <span style=color:#a6e22e>Named</span> {
    <span style=color:#66d9ef>var</span> name: String { <span style=color:#66d9ef>get</span> <span style=color:#66d9ef>set</span> }
}

<span style=color:#66d9ef>protocol</span> <span style=color:#a6e22e>Aged</span> {
    <span style=color:#66d9ef>var</span> age: Int { <span style=color:#66d9ef>get</span> }
}

<span style=color:#66d9ef>class</span> <span style=color:#a6e22e>TestClass</span> {}

<span style=color:#66d9ef>extension</span> <span style=color:#a6e22e>Aged</span> <span style=color:#66d9ef>where</span> <span style=color:#66d9ef>Self</span>: TestClass {
    <span style=color:#66d9ef>var</span> age: Int { <span style=color:#66d9ef>return</span> <span style=color:#ae81ff>1</span> }
}

<span style=color:#75715e>//</span><span style=color:#75715e> </span><span style=color:#75715e>父</span><span style=color:#75715e>类</span><span style=color:#75715e>名</span><span style=color:#75715e>放</span><span style=color:#75715e>在</span><span style=color:#75715e>协</span><span style=color:#75715e>议</span><span style=color:#75715e>名</span><span style=color:#75715e>之</span><span style=color:#75715e>前</span>
<span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Person</span>: TestClass, Named, Aged {
    <span style=color:#66d9ef>var</span> name: String
    
    <span style=color:#66d9ef>init</span>(name: String) {
        <span style=color:#66d9ef>self</span>.name = name
    }
}

<span style=color:#75715e>//</span><span style=color:#75715e> </span><span style=color:#75715e>c</span><span style=color:#75715e>e</span><span style=color:#75715e>l</span><span style=color:#75715e>e</span><span style=color:#75715e>b</span><span style=color:#75715e>r</span><span style=color:#75715e>a</span><span style=color:#75715e>t</span><span style=color:#75715e>o</span><span style=color:#75715e>r</span><span style=color:#75715e> </span><span style=color:#75715e>的</span><span style=color:#75715e>类</span><span style=color:#75715e>型</span><span style=color:#75715e>为</span><span style=color:#75715e> </span><span style=color:#75715e>N</span><span style=color:#75715e>a</span><span style=color:#75715e>m</span><span style=color:#75715e>e</span><span style=color:#75715e>d</span><span style=color:#75715e> </span><span style=color:#75715e>&amp;</span><span style=color:#75715e> </span><span style=color:#75715e>A</span><span style=color:#75715e>g</span><span style=color:#75715e>e</span><span style=color:#75715e>d</span><span style=color:#75715e>，</span><span style=color:#75715e>这</span><span style=color:#75715e>意</span><span style=color:#75715e>味</span><span style=color:#75715e>着</span><span style=color:#75715e>它</span><span style=color:#75715e>不</span><span style=color:#75715e>关</span><span style=color:#75715e>心</span><span style=color:#75715e>参</span><span style=color:#75715e>数</span><span style=color:#75715e>的</span><span style=color:#75715e>具</span><span style=color:#75715e>体</span><span style=color:#75715e>类</span><span style=color:#75715e>型</span><span style=color:#75715e>，</span><span style=color:#75715e>只</span><span style=color:#75715e>要</span><span style=color:#75715e>参</span><span style=color:#75715e>数</span><span style=color:#75715e>符</span><span style=color:#75715e>合</span><span style=color:#75715e>这</span><span style=color:#75715e>两</span><span style=color:#75715e>个</span><span style=color:#75715e>协</span><span style=color:#75715e>议</span><span style=color:#75715e>即</span><span style=color:#75715e>可</span><span style=color:#75715e>，</span><span style=color:#75715e>这</span><span style=color:#75715e>称</span><span style=color:#75715e>为</span><span style=color:#75715e>协</span><span style=color:#75715e>议</span><span style=color:#75715e>合</span><span style=color:#75715e>成</span><span style=color:#75715e>。</span>
<span style=color:#66d9ef>func</span> <span style=color:#a6e22e>wishHappyBirthday</span>(to celebrator: Named <span style=color:#f92672>&amp;</span> Aged) {
    print(<span style=color:#e6db74>&#34;</span><span style=color:#e6db74>Happy birthday, </span><span style=color:#e6db74>\(</span>celebrator.name<span style=color:#e6db74>)</span><span style=color:#e6db74>, you&#39;re </span><span style=color:#e6db74>\(</span>celebrator.age<span style=color:#e6db74>)</span><span style=color:#e6db74>!</span><span style=color:#e6db74>&#34;</span>)
}

<span style=color:#66d9ef>let</span> birthdayPerson = Person(name: <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>xx</span><span style=color:#e6db74>&#34;</span>)
wishHappyBirthday(to: birthdayPerson)
</code></pre></div><p>添加 class 关键字来限制协议只能被类类型遵循</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=color:#66d9ef>protocol</span> <span style=color:#a6e22e>SomeProtocol</span>: <span style=color:#66d9ef>class</span> {}
</code></pre></div><p>使用 @objc 修饰后的类型，可以供 Objective-C 调用,标记 @objc 特性的协议只能被继承自 Objective-C 类的类或者 @objc 类遵循，struct 不能用，以下代码是错的：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=color:#66d9ef>@objc</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>test</span> {
    <span style=color:#75715e>//</span><span style=color:#75715e> </span><span style=color:#75715e>使</span><span style=color:#75715e>用</span><span style=color:#75715e>@</span><span style=color:#75715e>o</span><span style=color:#75715e>b</span><span style=color:#75715e>j</span><span style=color:#75715e>c</span><span style=color:#75715e>修</span><span style=color:#75715e>饰</span><span style=color:#75715e>的</span><span style=color:#75715e>类</span><span style=color:#75715e>，</span><span style=color:#75715e>必</span><span style=color:#75715e>须</span><span style=color:#75715e>继</span><span style=color:#75715e>承</span><span style=color:#75715e>自</span><span style=color:#75715e>N</span><span style=color:#75715e>S</span><span style=color:#75715e>O</span><span style=color:#75715e>b</span><span style=color:#75715e>j</span><span style=color:#75715e>e</span><span style=color:#75715e>c</span><span style=color:#75715e>t</span>
}
</code></pre></div><p>Swift 协议中的所有方法默认情况下都要被确认者实现，可通过扩展来实现某个方法使其成为可选方法，也可用下面方式来实现</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=color:#66d9ef>@objc</span> <span style=color:#66d9ef>protocol</span> <span style=color:#a6e22e>AnotherProtocol</span> {
    <span style=color:#66d9ef>@objc</span> <span style=color:#66d9ef>optional</span> <span style=color:#66d9ef>func</span> <span style=color:#a6e22e>incrementForCount</span>(count: Int) -&gt; Int
    <span style=color:#66d9ef>@objc</span> <span style=color:#66d9ef>optional</span> <span style=color:#66d9ef>var</span> fixedIncrement: Int { <span style=color:#66d9ef>get</span> }
}
</code></pre></div><p>在 struct 或 enum 中用 mutating 来修饰方法是为了能够在该方法内修改自己的变量，如果协议中定义的方法没有写 mutating，那么确认该协议的 struct 或 enum 就不能在该方法中修改自己的变量，class 的话没关系，因为 class 可以随意修改自己的变量。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=color:#66d9ef>protocol</span> <span style=color:#a6e22e>SomeProtocol</span> {
    <span style=color:#66d9ef>var</span> name: String { <span style=color:#66d9ef>get</span> <span style=color:#66d9ef>set</span> }

    <span style=color:#66d9ef>mutating</span> <span style=color:#66d9ef>func</span> <span style=color:#a6e22e>changeName</span>(<span style=color:#66d9ef>_</span> name: String)
}

<span style=color:#66d9ef>struct</span> <span style=color:#a6e22e>SomeClass</span>: SomeProtocol {
    <span style=color:#66d9ef>mutating</span> <span style=color:#66d9ef>func</span> <span style=color:#a6e22e>changeName</span>(<span style=color:#66d9ef>_</span> name: String) {
        <span style=color:#66d9ef>self</span>.name = name <span style=color:#75715e>//</span><span style=color:#75715e> </span><span style=color:#75715e>c</span><span style=color:#75715e>h</span><span style=color:#75715e>a</span><span style=color:#75715e>n</span><span style=color:#75715e>g</span><span style=color:#75715e>e</span><span style=color:#75715e>N</span><span style=color:#75715e>a</span><span style=color:#75715e>m</span><span style=color:#75715e>e</span><span style=color:#75715e> </span><span style=color:#75715e>方</span><span style=color:#75715e>法</span><span style=color:#75715e>如</span><span style=color:#75715e>果</span><span style=color:#75715e>没</span><span style=color:#75715e>加</span><span style=color:#75715e> </span><span style=color:#75715e>m</span><span style=color:#75715e>u</span><span style=color:#75715e>t</span><span style=color:#75715e>a</span><span style=color:#75715e>t</span><span style=color:#75715e>i</span><span style=color:#75715e>n</span><span style=color:#75715e>g</span><span style=color:#75715e> </span><span style=color:#75715e>编</span><span style=color:#75715e>译</span><span style=color:#75715e>会</span><span style=color:#75715e>报</span><span style=color:#75715e>错</span>
    }
}

</code></pre></div><h2 id=heading-32>泛型</h2><p>泛型能够减少重复代码，用一种清晰和抽象的方式来表达代码的意图。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=color:#75715e>//</span><span style=color:#75715e> </span><span style=color:#75715e>没</span><span style=color:#75715e>用</span><span style=color:#75715e>到</span><span style=color:#75715e>泛</span><span style=color:#75715e>型</span><span style=color:#75715e>，</span><span style=color:#75715e>它</span><span style=color:#75715e>只</span><span style=color:#75715e>能</span><span style=color:#75715e>交</span><span style=color:#75715e>换</span><span style=color:#75715e> </span><span style=color:#75715e>I</span><span style=color:#75715e>n</span><span style=color:#75715e>t</span><span style=color:#75715e> </span><span style=color:#75715e>值</span>
<span style=color:#66d9ef>func</span> <span style=color:#a6e22e>swapTwoInts</span>(<span style=color:#66d9ef>_</span> a: <span style=color:#66d9ef>inout</span> Int, <span style=color:#66d9ef>_</span> b: <span style=color:#66d9ef>inout</span> Int) {
    <span style=color:#66d9ef>let</span> temporaryA = a
    a = b
    b = temporaryA
}

<span style=color:#75715e>//</span><span style=color:#75715e> </span><span style=color:#75715e>用</span><span style=color:#75715e>了</span><span style=color:#75715e>泛</span><span style=color:#75715e>型</span><span style=color:#75715e>可</span><span style=color:#75715e>以</span><span style=color:#75715e>交</span><span style=color:#75715e>换</span><span style=color:#75715e>任</span><span style=color:#75715e>意</span><span style=color:#75715e>类</span><span style=color:#75715e>型</span><span style=color:#75715e>的</span><span style=color:#75715e>值</span><span style=color:#75715e>，</span><span style=color:#75715e>T</span><span style=color:#75715e> </span><span style=color:#75715e>的</span><span style=color:#75715e>具</span><span style=color:#75715e>体</span><span style=color:#75715e>类</span><span style=color:#75715e>型</span><span style=color:#75715e>可</span><span style=color:#75715e>以</span><span style=color:#75715e>由</span><span style=color:#75715e>传</span><span style=color:#75715e>入</span><span style=color:#75715e>的</span><span style=color:#75715e>值</span><span style=color:#75715e>的</span><span style=color:#75715e>类</span><span style=color:#75715e>型</span><span style=color:#75715e>推</span><span style=color:#75715e>断</span><span style=color:#75715e>出</span><span style=color:#75715e>来</span><span style=color:#75715e>。</span>
<span style=color:#66d9ef>func</span> <span style=color:#a6e22e>swapTwoValues</span>&lt;T&gt;(<span style=color:#66d9ef>_</span> a: <span style=color:#66d9ef>inout</span> T, <span style=color:#66d9ef>_</span> b: <span style=color:#66d9ef>inout</span> T) {
    <span style=color:#66d9ef>let</span> temporaryA = a
    a = b
    b = temporaryA
}
</code></pre></div><p>泛型还可以添加类型约束，用来指定一个类型参数必须继承自指定类，或者符合一个特定的协议或协议组合。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>findIndex</span>&lt;T: Equatable&gt;(of valueToFind: T, <span style=color:#66d9ef>in</span> array:[T]) -&gt; Int? {
    <span style=color:#66d9ef>for</span> (index, value) <span style=color:#66d9ef>in</span> array.enumerated() {
        <span style=color:#66d9ef>if</span> value == valueToFind {
            <span style=color:#66d9ef>return</span> index
        }
    }
    <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>nil</span>
}

<span style=color:#66d9ef>let</span> doubleIndex = findIndex(of: <span style=color:#ae81ff>9.3</span>, <span style=color:#66d9ef>in</span>: [<span style=color:#ae81ff>3.14159</span>, <span style=color:#ae81ff>0.1</span>, <span style=color:#ae81ff>0.25</span>])
<span style=color:#66d9ef>let</span> stringIndex = findIndex(of: <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>Andrea</span><span style=color:#e6db74>&#34;</span>, <span style=color:#66d9ef>in</span>: [<span style=color:#e6db74>&#34;</span><span style=color:#e6db74>Mike</span><span style=color:#e6db74>&#34;</span>, <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>Malcolm</span><span style=color:#e6db74>&#34;</span>, <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>Andrea</span><span style=color:#e6db74>&#34;</span>])
</code></pre></div><p>Swift 还允许定义泛型类型。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=color:#66d9ef>struct</span> <span style=color:#a6e22e>Stack</span>&lt;Element&gt; {
    <span style=color:#66d9ef>var</span> items = [Element]()
    <span style=color:#66d9ef>mutating</span> <span style=color:#66d9ef>func</span> <span style=color:#a6e22e>push</span>(<span style=color:#66d9ef>_</span> item: Element) {
        items.append(item)
    }
    <span style=color:#66d9ef>mutating</span> <span style=color:#66d9ef>func</span> <span style=color:#a6e22e>pop</span>() -&gt; Element {
        <span style=color:#66d9ef>return</span> items.removeLast()
    }
}

<span style=color:#66d9ef>var</span> stackOfStrings = Stack&lt;String&gt;()
stackOfStrings.push(<span style=color:#e6db74>&#34;</span><span style=color:#e6db74>apple</span><span style=color:#e6db74>&#34;</span>)
</code></pre></div><h2 id=heading-33>错误处理</h2><p>和其他语言中的异常处理不同的是，Swift 中的错误处理并不涉及展开调用栈，所以对性能影响不大。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=color:#66d9ef>enum</span> <span style=color:#a6e22e>StringError</span>: Error {
    <span style=color:#66d9ef>case</span> StringisEmpty, OtherError
}

<span style=color:#66d9ef>func</span> <span style=color:#a6e22e>canThrowAnError</span>(name: String) <span style=color:#66d9ef>throws</span> -&gt; String {
    <span style=color:#66d9ef>guard</span> <span style=color:#f92672>!</span>name.isEmpty <span style=color:#66d9ef>else</span> {
        <span style=color:#66d9ef>throw</span> StringError.StringisEmpty
    }
    
    <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>no error</span><span style=color:#e6db74>&#34;</span>
}

<span style=color:#66d9ef>do</span> {
    <span style=color:#66d9ef>var</span> str = <span style=color:#66d9ef>try</span> canThrowAnError(name: <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>&#34;</span>) <span style=color:#75715e>//</span><span style=color:#75715e> </span><span style=color:#75715e>如</span><span style=color:#75715e>果</span><span style=color:#75715e>写</span><span style=color:#75715e>成</span><span style=color:#75715e> </span><span style=color:#75715e>t</span><span style=color:#75715e>r</span><span style=color:#75715e>y</span><span style=color:#75715e>?</span><span style=color:#75715e>，</span><span style=color:#75715e>那</span><span style=color:#75715e>么</span><span style=color:#75715e>方</span><span style=color:#75715e>法</span><span style=color:#75715e>在</span><span style=color:#75715e>抛</span><span style=color:#75715e>出</span><span style=color:#75715e>错</span><span style=color:#75715e>误</span><span style=color:#75715e>时</span><span style=color:#75715e>，</span><span style=color:#75715e>会</span><span style=color:#75715e>将</span><span style=color:#75715e> </span><span style=color:#75715e>n</span><span style=color:#75715e>i</span><span style=color:#75715e>l</span><span style=color:#75715e> </span><span style=color:#75715e>赋</span><span style=color:#75715e>给</span><span style=color:#75715e> </span><span style=color:#75715e>s</span><span style=color:#75715e>t</span><span style=color:#75715e>r</span><span style=color:#75715e>，</span><span style=color:#75715e>如</span><span style=color:#75715e>果</span><span style=color:#75715e>认</span><span style=color:#75715e>为</span><span style=color:#75715e>方</span><span style=color:#75715e>法</span><span style=color:#75715e>不</span><span style=color:#75715e>可</span><span style=color:#75715e>能</span><span style=color:#75715e>抛</span><span style=color:#75715e>出</span><span style=color:#75715e>错</span><span style=color:#75715e>误</span><span style=color:#75715e>，</span><span style=color:#75715e>可</span><span style=color:#75715e>以</span><span style=color:#75715e>用</span><span style=color:#75715e> </span><span style=color:#75715e>t</span><span style=color:#75715e>r</span><span style=color:#75715e>y</span><span style=color:#75715e>!</span>
    
    print(<span style=color:#e6db74>&#34;</span><span style=color:#e6db74>没有错误</span><span style=color:#e6db74>&#34;</span>)
} <span style=color:#66d9ef>catch</span> StringError.StringisEmpty <span style=color:#66d9ef>where</span> <span style=color:#ae81ff>1</span> == <span style=color:#ae81ff>1</span> {
    print(<span style=color:#e6db74>&#34;</span><span style=color:#e6db74>字符串不能为空</span><span style=color:#e6db74>&#34;</span>)
} <span style=color:#66d9ef>catch</span> <span style=color:#66d9ef>let</span> error {
    print(<span style=color:#e6db74>&#34;</span><span style=color:#e6db74>其它错误: </span><span style=color:#e6db74>\(</span>error<span style=color:#e6db74>)</span><span style=color:#e6db74>&#34;</span>)
}
</code></pre></div><h2 id=heading-34>其它</h2><h3 id=heading-35>给类型起别名</h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=color:#66d9ef>typealias</span> MyInt = Int
</code></pre></div><h3 id=heading-36>注释</h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=color:#75715e>/*</span><span style=color:#75715e> </span><span style=color:#75715e>
</span><span style=color:#75715e></span><span style=color:#75715e> </span><span style=color:#75715e> </span><span style=color:#75715e> </span><span style=color:#75715e> </span><span style=color:#75715e>.</span><span style=color:#75715e>.</span><span style=color:#75715e>.</span><span style=color:#75715e>
</span><span style=color:#75715e></span><span style=color:#75715e> </span><span style=color:#75715e> </span><span style=color:#75715e> </span><span style=color:#75715e> </span><span style=color:#75715e>/*</span><span style=color:#75715e> </span><span style=color:#75715e>支</span><span style=color:#75715e>持</span><span style=color:#75715e>多</span><span style=color:#75715e>行</span><span style=color:#75715e>注</span><span style=color:#75715e>释</span><span style=color:#75715e>嵌</span><span style=color:#75715e>套</span><span style=color:#75715e> </span><span style=color:#75715e>*/</span><span style=color:#75715e>
</span><span style=color:#75715e></span><span style=color:#75715e> </span><span style=color:#75715e> </span><span style=color:#75715e> </span><span style=color:#75715e> </span><span style=color:#75715e>.</span><span style=color:#75715e>.</span><span style=color:#75715e>.</span><span style=color:#75715e>
</span><span style=color:#75715e></span><span style=color:#75715e>*/</span>
</code></pre></div><h3 id=heading-37>断言</h3><p>一般用于在函数中对参数进行有效性验证，以避免非法的参数值导致函数不能正常执行，Xcode 在用 Release 配置项编译项目时，断言会被禁用。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=color:#66d9ef>let</span> age = <span style=color:#f92672>-</span><span style=color:#ae81ff>3</span>

assert(age <span style=color:#f92672>&gt;=</span> <span style=color:#ae81ff>0</span>, <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>A person&#39;s age cannot be less than zero</span><span style=color:#e6db74>&#34;</span>)
</code></pre></div><h3 id=heading-38>编译配置语句</h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=color:#75715e>#if</span> <span style=color:#75715e>arch</span>(<span style=color:#75715e>i386</span>) <span style=color:#f92672>||</span> <span style=color:#75715e>arch</span>(<span style=color:#75715e>x86_64</span>)

<span style=color:#75715e>#endif</span>
</code></pre></div><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=color:#75715e>#if</span> <span style=color:#75715e>swift</span>( <span style=color:#f92672>&gt;=</span><span style=color:#ae81ff>3.0</span>.<span style=color:#ae81ff>0</span> )
    
<span style=color:#75715e>#endif</span>
</code></pre></div><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=color:#66d9ef>if</span> <span style=color:#75715e>#available</span>(<span style=color:#75715e>iOS</span> <span style=color:#ae81ff>9.1</span>.<span style=color:#ae81ff>0</span>, <span style=color:#f92672>*</span>) {
    <span style=color:#75715e>//</span><span style=color:#75715e> </span><span style=color:#75715e>使</span><span style=color:#75715e>用</span><span style=color:#75715e> </span><span style=color:#75715e>i</span><span style=color:#75715e>O</span><span style=color:#75715e>S</span><span style=color:#75715e> </span><span style=color:#75715e>9</span><span style=color:#75715e>.</span><span style=color:#75715e>1</span><span style=color:#75715e>.</span><span style=color:#75715e>0</span><span style=color:#75715e>+</span><span style=color:#75715e> </span><span style=color:#75715e>的</span><span style=color:#75715e> </span><span style=color:#75715e>A</span><span style=color:#75715e>P</span><span style=color:#75715e>I</span>
}
</code></pre></div><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift>print(<span style=color:#66d9ef>#file</span>, <span style=color:#66d9ef>#function</span>, <span style=color:#66d9ef>#line</span>)
</code></pre></div><h3 id=heading-39>标注命令</h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=color:#75715e>//</span><span style=color:#75715e> </span><span style=color:#75715e>MARK:</span><span style=color:#75715e> </span><span style=color:#75715e>-</span><span style=color:#75715e> </span><span style=color:#75715e>S</span><span style=color:#75715e>e</span><span style=color:#75715e>c</span><span style=color:#75715e>t</span><span style=color:#75715e>i</span><span style=color:#75715e>o</span><span style=color:#75715e>n</span><span style=color:#75715e> </span><span style=color:#75715e>m</span><span style=color:#75715e>a</span><span style=color:#75715e>r</span><span style=color:#75715e>k</span><span style=color:#75715e> </span><span style=color:#75715e>w</span><span style=color:#75715e>i</span><span style=color:#75715e>t</span><span style=color:#75715e>h</span><span style=color:#75715e> </span><span style=color:#75715e>a</span><span style=color:#75715e> </span><span style=color:#75715e>s</span><span style=color:#75715e>e</span><span style=color:#75715e>p</span><span style=color:#75715e>a</span><span style=color:#75715e>r</span><span style=color:#75715e>a</span><span style=color:#75715e>t</span><span style=color:#75715e>o</span><span style=color:#75715e>r</span><span style=color:#75715e> </span><span style=color:#75715e>l</span><span style=color:#75715e>i</span><span style=color:#75715e>n</span><span style=color:#75715e>e</span>
<span style=color:#75715e>//</span><span style=color:#75715e> </span><span style=color:#75715e>TODO:</span><span style=color:#75715e> </span><span style=color:#75715e>D</span><span style=color:#75715e>o</span><span style=color:#75715e> </span><span style=color:#75715e>s</span><span style=color:#75715e>o</span><span style=color:#75715e>m</span><span style=color:#75715e>e</span><span style=color:#75715e>t</span><span style=color:#75715e>h</span><span style=color:#75715e>i</span><span style=color:#75715e>n</span><span style=color:#75715e>g</span><span style=color:#75715e> </span><span style=color:#75715e>s</span><span style=color:#75715e>o</span><span style=color:#75715e>o</span><span style=color:#75715e>n</span>
<span style=color:#75715e>//</span><span style=color:#75715e> </span><span style=color:#75715e>FIXME:</span><span style=color:#75715e> </span><span style=color:#75715e>F</span><span style=color:#75715e>i</span><span style=color:#75715e>x</span><span style=color:#75715e> </span><span style=color:#75715e>t</span><span style=color:#75715e>h</span><span style=color:#75715e>i</span><span style=color:#75715e>s</span><span style=color:#75715e> </span><span style=color:#75715e>c</span><span style=color:#75715e>o</span><span style=color:#75715e>d</span><span style=color:#75715e>e</span>
</code></pre></div><h3 id=discardableresult>@discardableResult</h3><p>如果没有使用方法返回的对象，编译器会有一个警告，有两种方法可以解决。</p><ul><li><p>如果是自己写的方法，在 func 前加 @discardableResult 修饰符，代表可以不使用返回值</p></li><li><p>对于第三方库中的方法：_ = navigationController?.popViewController(animated: true)</p></li></ul><h3 id=defer->defer 语句</h3><p>defer语句在即将离开当前代码块时（throw、return 等）执行一系列语句，可用于执行一些必要的清理工作。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>test</span>(<span style=color:#66d9ef>_</span> param: String) {
    <span style=color:#66d9ef>guard</span> param.isEmpty <span style=color:#66d9ef>else</span> {
        <span style=color:#66d9ef>return</span>
    }
    <span style=color:#66d9ef>defer</span> {
        print(<span style=color:#e6db74>&#34;</span><span style=color:#e6db74>我一定会被执行</span><span style=color:#e6db74>&#34;</span>)
    }
}

test(<span style=color:#e6db74>&#34;</span><span style=color:#e6db74>&#34;</span>)
</code></pre></div></div><div class=post-footer></div></article></main></body></html>